const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/firebase-BmucWFeD.js","assets/vendor-TdW6XrG7.js","assets/audio-C_N-pnQi.js","assets/firestore-B5l3haMQ.js","assets/react-dom-COoTj2QG.js"])))=>i.map(i=>d[i]);
import{r as e,j as t,u as a,d as s,P as n}from"./vendor-TdW6XrG7.js";import{c as r}from"./react-dom-COoTj2QG.js";import{s as i,t as o}from"./firebase-BmucWFeD.js";import{u as l,T as c,i as u,a as d,B as m}from"./localization-CYCQVvnX.js";import{v as g,s as p,o as f,r as h}from"./utils-Cn72Yc4k.js";import{h as b}from"./audio-C_N-pnQi.js";import{I as x,B as k,G as y,a as j,b as v,S as w,c as N,d as E,e as S,f as z,R as C,g as M,X as I,M as _,V as L,h as $,i as D,j as R,k as P,L as O,l as A,C as T,m as q,A as F,n as U,o as B,p as V,q as G,r as K,s as X,F as H,t as Y,u as W,D as Z,v as J,w as Q}from"./icons-DOqzXTc9.js";import{u as ee,a as te,b as ae,O as se,R as ne,c as re,N as ie,H as oe}from"./router-s_YAddDu.js";import{serverTimestamp as le,Timestamp as ce,where as ue,orderBy as de,limit as me}from"./firestore-B5l3haMQ.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const ge={},pe=function(e,t,a){let s=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),a=e?.nonce||e?.getAttribute("nonce");n=t.map(e=>{if((e=function(e){return"/infinite-nonogram/"+e}(e))in ge)return;ge[e]=!0;const t=e.endsWith(".css"),s=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${s}`))return;const n=document.createElement("link");return n.rel=t?"stylesheet":"modulepreload",t||(n.as="script"),n.crossOrigin="",n.href=e,a&&n.setAttribute("nonce",a),document.head.appendChild(n),t?new Promise((t,a)=>{n.addEventListener("load",t),n.addEventListener("error",()=>a(new Error(`Unable to preload CSS for ${e}`)))}):void 0}),s=Promise.all(n.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))}var n;function r(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return s.then(t=>{for(const e of t||[])"rejected"===e.status&&r(e.reason);return e().catch(r)})},fe=e.createContext(void 0),he="1.2.14";const be={apiKey:"AIzaSyD2nmb9SCBi_tGBqgRm45SD2Kd3_prls0o",authDomain:"super-nonogram.firebaseapp.com",projectId:"super-nonogram",storageBucket:"super-nonogram.firebasestorage.app",messagingSenderId:"1019221268880",appId:"1:1019221268880:web:8f068f86a5aa14e27fbb15",measurementId:"G-47DNVR0K3D"},xe=({children:a})=>{const{i18n:s}=l(),[n,r]=e.useState(null),[c,u]=e.useState(null),[d,m]=e.useState(null),[g,p]=e.useState(null),f=e.useMemo(()=>null!==n&&null!==c&&null!==d,[n,c,d]),h=e.useMemo(()=>0===o().length?i(be):o()[0],[]),b=e.useCallback(async(e,t)=>{if(!g)return;const{logEvent:a}=await pe(async()=>{const{logEvent:e}=await import("./firebase-BmucWFeD.js").then(e=>e.v);return{logEvent:e}},__vite__mapDeps([0,1,2]));try{a(g,e,t)}catch(s){}},[g]);return e.useEffect(()=>{let e=null;return(async()=>{const{getAuth:t,onAuthStateChanged:a,signInAnonymously:s}=await pe(async()=>{const{getAuth:e,onAuthStateChanged:t,signInAnonymously:a}=await import("./firebase-BmucWFeD.js").then(e=>e.w);return{getAuth:e,onAuthStateChanged:t,signInAnonymously:a}},__vite__mapDeps([0,1,2])),n=t(h);r(n),e=a(n,async e=>{if(e)u(e);else{const e=await s(n);u(e.user)}})})(),()=>{e&&e()}},[h]),e.useEffect(()=>{(async()=>{const{getFirestore:e}=await pe(async()=>{const{getFirestore:e}=await import("./firestore-B5l3haMQ.js");return{getFirestore:e}},__vite__mapDeps([3,0,1,2]));m(e(h))})()},[h]),e.useEffect(()=>{(async()=>{const{getAnalytics:e,isSupported:t,setUserProperties:a}=await pe(async()=>{const{getAnalytics:e,isSupported:t,setUserProperties:a}=await import("./firebase-BmucWFeD.js").then(e=>e.v);return{getAnalytics:e,isSupported:t,setUserProperties:a}},__vite__mapDeps([0,1,2]));if(await t()){const t=e(h);a(t,{app_version:`${he}`,locale:s.language,user_role:"player"}),p(t)}})()},[h,s.language]),t.jsx(fe.Provider,{value:{app:h,firestore:d,analytics:g,auth:n,user:c,isAuthenticated:f,logEvent:b},children:a})},ke=()=>{const t=e.useContext(fe);if(!t)throw new Error("useFirebase must be used within a FirebaseProvider");return t},ye=e.createContext(void 0),je={locale:{allowed:{default:"en-GB",list:["en-GB"]},groups:{default:"default",list:["default"]}},pages:{default:"game"},game:{grid:{default:10,min:5,max:15,block:{size:2.5,disabledByError:700},hint:{groupPadding:.65,padding:.05}},difficulty:{default:"medium",list:{easy:.75,medium:.55,hard:.35}},scale:{default:1,min:.5,max:2,step:.05},score:{win:.5,multiplier:1e5,bonus:{perfect:1.5,difficulty:{easy:1,medium:1.25,hard:1.5}},penalty:{time:1e-7,errors:.9,interactions:.5}}},meta:[{httpEquiv:"Content-Security-Policy",content:["default-src 'self'","script-src 'self' https://www.googletagmanager.com https://apis.google.com","connect-src 'self' https://firebase.googleapis.com https://firestore.googleapis.com https://securetoken.googleapis.com https://firebaseinstallations.googleapis.com https://identitytoolkit.googleapis.com https://region1.google-analytics.com https://api.country.is","style-src 'self' 'unsafe-inline'","img-src 'self' data: https://www.googletagmanager.com","font-src 'self'","frame-src 'self' https://super-nonogram.firebaseapp.com","object-src 'none'","base-uri 'self'","form-action 'self'","upgrade-insecure-requests"]},{httpEquiv:"X-Content-Type-Options",content:"nosniff"},{httpEquiv:"Permissions-Policy",content:"geolocation=(), microphone=(), camera=()"},{name:"referrer",content:"strict-origin-when-cross-origin"},{name:"robots",content:"index, follow"}],preload:[{rel:"dns-prefetch",href:"https://apis.google.com"},{rel:"dns-prefetch",href:"https://firebase.googleapis.com"},{rel:"dns-prefetch",href:"https://firestore.googleapis.com"},{rel:"dns-prefetch",href:"https://securetoken.googleapis.com"},{rel:"dns-prefetch",href:"https://firebaseinstallations.googleapis.com"},{rel:"dns-prefetch",href:"https://identitytoolkit.googleapis.com"},{rel:"dns-prefetch",href:"https://www.googletagmanager.com"},{rel:"dns-prefetch",href:"https://region1.google-analytics.com"},{rel:"dns-prefetch",href:"https://api.country.is"},{rel:"dns-preconnect",href:"https://apis.google.com",crossorigin:"anonymous"},{rel:"preconnect",href:"https://firebase.googleapis.com",crossorigin:"anonymous"},{rel:"preconnect",href:"https://firestore.googleapis.com",crossorigin:"anonymous"},{rel:"preconnect",href:"https://securetoken.googleapis.com",crossorigin:"anonymous"},{rel:"preconnect",href:"https://firebaseinstallations.googleapis.com",crossorigin:"anonymous"},{rel:"preconnect",href:"https://identitytoolkit.googleapis.com",crossorigin:"anonymous"},{rel:"preconnect",href:"https://www.googletagmanager.com",crossorigin:"anonymous"},{rel:"preconnect",href:"https://region1.google-analytics.com",crossorigin:"anonymous"},{rel:"preconnect",href:"https://api.country.is",crossorigin:"anonymous"}]},ve=new RegExp(JSON.parse('["ass","gay","2g1c","4r5e","5h1t","5hit","anus","anws","ar5e","asal","asas","ases","asna","ayam","bajs","bdsm","bile","boig","bout","buzi","cait","cawk","cipa","cl1t","cnut","coqs","cran","crap","culs","d1ck","dada","diga","dige","dijk","dike","dlck","drol","dupa","dvda","epsh","esel","fags","fena","feny","ferr","fica","figa","flis","fuks","gafa","gjel","gook","gort","guro","heeb","hell","here","hewu","himo","himu","hoer","hoor","hora","hori","jaja","jama","jism","jizm","jizz","kalu","kawk","kedi","kelp","kike","kisa","kock","koqe","kozy","krma","kuce","kuja","kuje","kums","kunt","kusi","kyke","m0f0","m0fo","maca","mear","mees","milf","mist","mof0","mofo","muca","muie","munn","noki","nude","obod","orau","orgy","osel","osli","osly","p0rn","pajp","pawn","pene","phuq","pipe","pits","poof","pron","prsa","pthc","pupa","pusy","puto","qarn","quim","reto","rhyw","rind","rrok","rufa","ryck","scal","scat","sedd","seni","sere","sh1t","siki","sisa","sise","sitt","skit","smar","smut","snop","spol","sqep","srac","srom","sugu","suhu","suky","sund","szex","szop","tama","teef","teez","tits","tupe","turd","tuss","tw4t","urin","usne","vang","vitt","vrug","wang","xixi","yaoi","zlom","fuck","boob","culo","shit","porn","aasit","ablah","anaal","anale","arrse","asail","asini","asnos","b00bs","b17ch","b1tch","besni","bikin","bolak","bolas","bolde","boles","bolso","boner","books","brawf","brida","bride","bular","busty","bweta","cacca","cagna","cazzi","cazzo","ceart","celah","chier","chinc","chink","chipa","choad","chode","cipki","clits","coles","coons","cotok","coura","covor","crnci","csikk","culus","cunts","curaj","curve","cycek","cycki","deich","digue","dilda","dildy","dinks","dirsa","doosh","droga","dubur","duche","dupek","dupki","ecchi","enfer","errea","eshak","ezels","f4nny","faggs","fanyy","faraj","farty","fasza","fecal","fenda","fente","fighe","filla","fisse","fitta","flens","fuker","fux0r","gabim","galos","gatet","geile","godes","gomar","gooch","govno","grope","grudi","guido","hanar","hanen","haner","helah","heshe","hirve","hoare","honky","horny","horoz","hovno","hugsa","huora","idest","igazi","inoiz","ipeni","irata","isdra","jajca","jezen","juggs","kacau","kadit","kakec","kakls","kamin","kejam","kelba","kesal","kinky","kippe","kiunt","kogut","kolza","kooch","korom","koule","kraav","kukko","kukot","kulki","kumer","kurac","kurat","kurba","kurbe","kurki","kurva","kurwa","kusse","kusta","kutas","labia","lesbo","linda","ljuti","lmfao","loden","lopty","lorte","loyiq","luder","lusta","lutka","marah","mater","merde","mesar","micio","ciola","ciole","menna","menne","mijar","minge","n1gga","naida","nakun","nasip","negri","negru","nekru","neukt","onzin","otepy","pabbi","pakao","palle","panty","papai","paska","pekel","peklo","phuck","phuks","picar","picsa","pidhi","pidyn","pinto","pises","pisof","pissa","pisst","pizda","pizde","pokol","porra","prdel","prikt","prsia","psice","pubes","punci","punta","pusku","pusse","putas","pylly","pysky","qonli","queaf","queef","queue","ragut","rahat","rakun","recte","recto","renob","retto","rogol","ruang","rumpa","ruski","sadze","samen","seins","semen","shota","shpoj","sidik","sjeme","skank","skeet","skrue","sluts","somas","spalt","spick","splav","spunk","svans","teets","tetas","tetta","tette","teven","tikar","tonto","trdlo","troie","trzaj","turci","tushy","ubera","uboda","udoti","v1gra","varle","vijak","vloek","vonoj","vulva","vulve","w00se","wanky","waria","whoar","willy","yiffy","zadek","zadok","zakar","zezak","titty","merda","bitch","gnagna","aborto","aborts","analan","analny","arraio","arslen","asilai","asilas","asinus","astoen","atloks","attans","baiser","ballen","bampot","baszik","batang","biatch","bichas","bimbos","blalen","blasen","blbost","blodig","bloody","blutig","boceta","bokira","boktan","bolera","bollar","bollok","bollox","booobs","bozont","buceta","buchty","bugger","buketa","bzdury","cabron","cacare","cagado","carajo","chinni","chlapa","cinege","cioroi","clawdd","coochy","cooter","coques","corneo","culata","cummer","cunnie","cunnus","cyalis","dambis","dammit","darkie","dhanhe","dievky","dikmek","dildod","dildos","dildot","dolium","dommes","dookie","durmir","dyrisk","dziwka","dziwki","eeslid","emased","escort","eunuch","fagbag","fagina","fagoty","fanden","farted","faszok","fcuker","feltch","femdom","femias","ffagio","ffycin","ficken","flamer","flange","fodido","follar","follas","follat","folles","fooker","fotzen","fukker","fukkin","fukwit","futuit","gaidys","gailis","gallos","gallus","goatcx","goatse","gokkun","gozada","grieta","gringo","guzica","hentai","hidhet","honkey","hooker","hrifsa","huoria","iaciat","ibhola","ifrinn","incest","iqhude","ixkora","jalang","jebani","jebati","jebeni","jelaga","kakoti","kapmak","karima","keldai","klapid","knobed","knulla","koerad","kokang","kontol","kootch","kopile","kosmik","kreten","krupon","krvavo","krwawy","kummer","kundak","kuradi","kutjes","kvragu","l3itch","labbra","labios","labium","laippa","lavire","lezzie","libris","llavis","lobbes","lolita","loovus","luxure","maksts","mamada","mellek","menipu","mezery","mierda","muschi","mushuk","n1gger","nahoru","nambla","narttu","nartut","natsid","negers","negres","negros","neraka","neuken","neuker","nigg3r","nigg4h","niggah","niggas","niggaz","niglet","nigwyr","nopelt","nudity","nussii","odjebi","odvaha","odwaga","pallid","pallot","pantat","pederi","peenis","peitos","pelusa","perras","perses","phuked","picant","piersi","pimpis","pimppi","piquer","pisarz","pising","pissed","pisses","pochwa","potrat","prasec","pricks","prizai","pshurr","punany","pungen","pusies","pussys","putain","quejas","raping","rapist","rectum","rektum","rimjaw","rimjob","rimmen","rinnad","rinnat","ripuli","rukken","rzepak","sadico","sadism","sampah","scroat","scrote","seksas","sialan","slampa","smegma","smulge","snatch","snavel","snuppe","sodomy","sperma","sperme","spermu","spleet","spooge","sranie","sranje","stiche","sticka","stront","suihin","szarik","szaros","szpara","tafarn","tarpas","tentak","teshik","testis","thinta","tieten","tihane","tissid","tissit","titten","tosser","tranny","trogra","tuppar","tuttar","twatty","uffern","ukuthi","uloste","urywek","usrani","usrano","uthuvi","v14gra","vadias","vagina","vagine","vajina","varpos","vaxina","viagra","voyeur","wanker","wiagra","wkurza","xashak","xrated","ysgwyd","zakila","zalany","zdzira","zeuren","abortas","abortti","abortua","abortum","abortus","abstand","agallas","amabele","amalabi","audacia","ballbag","ballett","banainn","beaners","begeren","bellend","beltzak","bloedig","blychau","boiolas","boooobs","boquete","borsten","boshcha","branler","breasts","brokker","bronnau","bryster","bukkake","buritan","cadelas","cagadas","cagando","camgirl","campana","camslut","canalla","ceiliog","cesaret","chattes","cinaede","coochie","coragem","corneum","corrida","cruento","cumming","cumshot","cumslut","cumtart","cuntrag","damnare","derdhje","diarree","dickbag","dickwad","dickwod","dikirim","dildoer","dogging","dolcett","dronken","druslan","dzimums","dzwonek","enculer","enojado","erotism","escroto","espacer","espacio","estupro","excitat","exclama","extremo","fagging","faggitt","faggots","fagotid","fagtard","falando","farting","fascina","fascine","fcuking","felacio","felatie","felatio","fellate","ffagots","figging","fisting","flangia","flansch","flikker","foderos","follada","follant","footjob","fukwhit","gammler","gaozari","gardish","gaudens","gaudyti","gefickt","geismas","gerkite","gerumas","handjob","hayvani","helvede","helvete","hintern","humping","ibneler","idiotas","imdemmi","inferno","inpulit","iphoswe","isifebe","isihogo","isineke","jackoff","janggut","jebemti","jigaboo","kabroia","kahmama","kakasok","kapsula","karanje","keledai","kencing","keparat","kinbaku","knobead","knobend","koberec","kohouty","kondums","kotoran","kumming","kurvice","licisci","locutus","luffare","lujuria","lusting","maldito","mallkim","mapache","memeler","menusuk","merdoso","merebut","mijando","mikpunt","molesto","nacisti","nawashi","nazista","neonazi","niggeri","niggers","nipples","noqulay","nutsack","ofticat","oilarra","onanera","onanere","orgasma","orgasmi","orgasms","orgasmy","orgazem","orgazmy","otuzbir","pakimba","palavra","panooch","panties","pedriza","pegging","peituda","pelacur","phuking","phukked","picadas","picades","pieprzy","pissend","pissers","pissing","pissoff","pisspig","playboy","pohoten","pokkers","pollock","pompino","poonani","poonany","poprsie","prasica","prikker","pritsid","punanny","punheta","puntura","pussies","putaria","puttana","pylimas","qochish","raakuus","raghead","rapiunt","retraso","rimming","rohkeus","sadique","sadista","sadisti","sadists","sadysta","sagnant","saksocu","salopes","satvert","schlong","schmutz","scopare","scopata","scortum","scrotum","serseri","sgriwio","sgrotwm","shagger","shahvat","sharlar","shemale","sherlar","shibari","shiznit","siepata","sjenica","skrotum","sletten","slutbag","spermie","spiorad","splooge","spricka","sriedak","stechen","stercus","strapon","stronzi","stronzo","stuprum","suceuse","sujeira","swinger","synovec","t1tt1e5","t1tties","tagumik","tanggul","tidelag","tilgeil","tittie5","titties","titwank","topless","torkima","transen","tremper","trepada","tubgirl","tusukan","twinkie","twunter","ubarroi","ubulili","ukufisa","ukujula","ukuqeda","upskirt","verinen","violeur","vjayjay","wetback","wichsen","willies","yaramas","zaadbal","zajebal","zurullo","masturb","booooobs","abortion","adferiad","amabhola","analinis","arracher","arsehole","babeland","baiseurs","bajingan","ballsack","bangbros","bareback","barrabil","bastardo","bastards","becerdin","bendrija","bercinta","berdarah","bernafsu","besoffen","bestjali","bichanos","birdlock","blowjobs","blumpkin","bochlach","bodnutie","bollocks","brengsek","bulldyke","bunghole","butthole","buttplug","cachonda","camwhore","cargolar","cehennem","chiennes","cholerny","clinchet","clitface","clitoris","clochard","cockbite","cockface","cockhead","cocknose","cocksuka","coglione","coileach","coksucka","connards","cornhole","creampie","cuntface","cunthole","dangalak","daterape","dickface","dickhead","dickhole","dickmilk","dickslap","dickweed","dildolar","doochbag","dracului","ejakulon","endetarm","eyacular","felacija","felching","femelles","fjandinn","fossatum","frotting","futanari","gallines","gallorum","genitals","goodpoop","goregasm","gwaedlyd","habuerit","helvetin","helvetti","horniest","hrabrost","idiotule","imbuttat","imfarrak","imqaxxar","infernua","infernum","infierno","ipurdian","irrumabo","isihloko","isikhala","isilwane","jahannam","jailbait","jiggaboo","jingalak","jinnilar","kelentit","kinkster","kliitori","klitoris","knobbing","knobhead","kohoutek","krunciet","kruvinas","labiilor","lezbiyen","libidine","liderlig","lussuria","ma5terb8","magaraca","marlatio","masterb8","megragad","meientis","melancap","menampar","mengutuk","meniduri","mentiras","merdique","molestar","mossegar","mossegat","moyaklar","munandit","nardymas","nasilnik","neekerit","nigerlar","niggerek","numbnuts","nustumta","nustumti","odoltsua","omorashi","orgasimo","orgasims","orgasmen","orgasmer","orgasmes","orgasmos","orgasmus","orgazama","orgazmas","orgazmov","orgazmus","orinando","pahuksen","pakirnik","papieros","payudara","pedobear","penchant","persetan","pessumae","petelini","pezevenk","phukking","pichanie","pisciare","pitomost","ponyplay","poontang","poponari","porcaria","porcarie","pragaras","prekleto","preproga","pricsean","prokleto","pukotina","raguotas","ragveida","raiskata","retardar","roetvlek","rutuliai","sanglant","santorum","saoghail","sapatona","scheisse","schijten","screwing","sgoltadh","shagging","shinging","siqilish","sitapead","skiderik","skrottum","slanteye","sodomija","sodomize","stercore","stidnica","swastika","szadista","szarozom","terkutuk","testical","testicle","testikel","tumaralo","twathead","twatlips","ukubamba","ukugubha","ukuhleka","ukuphoqa","ukuphosa","usporiti","ustunlar","vagabond","varjatud","vibrator","vidalama","vidhosje","violador","violator","vitleysa","voldtage","wytryski","yukxalta","zenciler","zpomalit","zvjerski","boooooobs","adharcach","amafagots","amilotxak","anilingus","arrebatar","arschloch","atsiknisk","avsugning","baginaren","barenaked","bastardis","bastinado","bestialem","bobbingar","borratxos","brutalita","buttmunch","clitoride","cocksmith","cocksucks","cocksukka","correguda","cumbubble","cumjockey","czarnuchy","deuchainn","dickjuice","douchebag","eiaculare","eiaculato","ejaculaat","ejaculado","ejaculant","ejaculare","ejakulace","ejakulate","ejakuluje","erthyliad","eyaculado","fellation","ficedulae","fingering","fuilteach","fundurile","fututorum","galopante","gangbangs","goddamned","hegaletan","hodensack","hurensohn","huudahtaa","incazzata","istovitor","itvachcha","jiggerboo","kahretsin","kechikish","kengerian","kibaszott","kiimainen","kkritikat","knobjocky","knobjokey","kruvimine","malleolis","maricones","masohhist","masohists","masokisti","mazohista","mazoshist","menyengat","merangkap","muffdiver","musluklar","octopussy","odbytnica","opritoare","orgasmeja","orgazmlar","orospular","pakabinti","pakliuvom","pedophile","penggemar","pichnutie","pichoqlar","pienoisen","pieprzone","pieprzony","pijpbeurt","pinchazos","pislikler","pissflaps","pissimine","plaktukas","pompinara","poopchute","posilstva","queerbait","queerhole","raiskaaja","razjeziti","retardant","rimavimas","ritardare","sangrento","sanguento","schlampen","schnappen","schrauben","schroeven","seggfejek","shrimping","shtazarak","sigaretta","silovanje","skruvning","skurwiele","spiraglio","strappado","strappare","sukupuoli","testicolo","testicule","threesome","throating","towelhead","transando","tribadism","tutkainta","ugrabitev","ukujibula","urophilia","vagabunda","vagabundo","vertragen","wibratory","yomonsoff","zoophilia","abspritzen","abtreibung","agterstavn","aparafusar","atornillar","autoerotic","avortament","avortement","balltasche","beastility","beschissen","bestialisk","bestiality","bestialski","booooooobs","bortxaketa","brutalitet","buttcheeks","c0cksucker","chwistrell","circlejerk","clitoridis","cockburger","cockjockey","cockknoker","cockmaster","cockmonkey","cocknugget","cocksmoker","cocksucked","cocksucker","cokmuncher","confundido","convoitise","cumguzzler","cunilingus","cuntlicker","dannazione","deepthroat","dickbeater","dickmonger","dicksucker","dickweasel","doggystyle","domination","dominatrix","ejaculando","ejaculated","ejaculates","ejaculatie","ejaculeert","ejaklangan","ejakulatov","ejakulerer","ejakuliert","ejakuliran","ejakulirao","ejakulovat","escremento","estuprador","fannyflaps","fingerbang","folladores","forbandede","gangbanged","geriausias","geschissen","gilipollas","homoerotic","insurubare","intepaturi","keberanian","kivespussi","klaarkomen","kunilingus","lovemaking","m45terbate","ma5terbate","masochiste","masoquista","masterbat3","masterbate","mazochista","memperkosa","menggerutu","mengongkek","muffdiving","paedophile","paskiainen","paskiaiset","peckerhead","pierdolony","polesmoker","poronienie","prakeiktas","prirobnico","prostituta","rulletobak","sangriento","sanguinoso","schluchzen","scissoring","sgaoileadh","shivirlash","striekanie","stupratore","tajovuzkor","terangsang","ukukhanuka","undressing","vidalanish","zaadlozing","achterschip","arschficker","avvitamento","beastiality","bestialitas","bestialitet","bestialnost","bestialstwo","cockmongler","cockmuncher","cocksucking","consoladors","coprolagnia","coprophilia","cumdumpster","cunillingus","cunnilingus","cuntlicking","cupiditatis","cyfrifiadur","dingleberry","doggiestyle","ejaculation","ejakulacija","ejakulacije","ejakulacijo","ejakulation","ejakulatlar","ejakulerade","ejakulerede","ejakulieren","ejakulirati","escuradents","fudgepacker","futangiilor","geciktirmek","gelandangan","godverdomme","hundeficker","intercourse","izimbongolo","klootzakken","madarikatua","masochistas","menyebalkan","muthafecker","nimphomania","nymphomania","pemerkosaan","pengguguran","purgamentum","ruuvaamalla","schamlippen","schwuchteln","sjofelheder","snowballing","subingalvis","thundercunt","umdlwenguli","berejakulasi","bestialidade","bestialitate","chorvachilik","cochonneries","cockmongruel","consoladores","dendrophilia","disingkirkan","donkeyribber","eiaculazione","ejaculatings","ejakuliacija","galletejador","gottverdammt","kebinatangan","memperlambat","nenorocitule","posiljevalec","pussylicking","sakramentsky","schaamlippen","seallaidhean","sharmandalik","skrutkovanie","takkenbossen","ukudlwengula","verkrachting","vorarephilia","carpetmuncher","dingleberries","ejakulyatsiya","ejekulyatsiya","farsaingeachd","fohishaxonada","jumalakartlik","masterbations","prostituierte","risukimppuina","shafqatsizlik","vergewaltigen","vergewaltiger","acrotomophilia","teppichmuncher","beestachtigheid","ejakulatsioonid","schwanzlutscher","ulkosynnyttimet","kehitysvammainen","trimone","kittemmurt"]').map(e=>`(${e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")})`).join("|"),"gi"),we=e=>{const t={a:"4",b:"8",e:"3",g:"9",i:"1",l:"1",o:"0",r:"2",s:"5",t:"7",z:"2"};return e.split("").map((e,a)=>a>0?t[e.toLowerCase()]||"*":e).join("")},Ne=e=>e.replace(ve,we),Ee=()=>Se(g()),Se=e=>Ne(e).replace(/[^A-Za-z0-9*]/g,"").substring(0,50),ze=e=>`infNono:${e}`,Ce=e=>getComputedStyle(document.documentElement).getPropertyValue(e).trim(),Me=()=>window.innerWidth,Ie=()=>window.innerHeight,_e=e=>window.open(e,"_blank","noopener, noreferrer"),Le=({children:a})=>{const[s,n]=e.useState(Me()),[r,i]=e.useState(Ie()),o=e.useRef(new Set);return e.useEffect(()=>{const e=new ResizeObserver(()=>{n(Me()),i(Ie()),o.current.forEach(e=>e())});return e.observe(document.documentElement),()=>e.disconnect()},[]),e.useEffect(()=>document.documentElement.style.setProperty("--dvw",`${s}px`),[s]),e.useEffect(()=>document.documentElement.style.setProperty("--dvh",`${r}px`),[r]),t.jsx(ye.Provider,{value:{width:s,height:r,subscribe:e=>(o.current.add(e),()=>o.current.delete(e))},children:a})},$e=e.createContext(void 0),De=e=>16*e,Re=()=>{const[t,a]=e.useState(""),s=e.useRef({xs:0,sm:De(parseFloat(Ce("--breakpoint-sm"))),md:De(parseFloat(Ce("--breakpoint-md"))),lg:De(parseFloat(Ce("--breakpoint-lg"))),xl:De(parseFloat(Ce("--breakpoint-xl"))),"2xl":De(parseFloat(Ce("--breakpoint-2xl")))}),{width:n}=(t=>{const a=e.useContext(ye),s=e.useRef(!1);if(!a)throw new Error("useResize must be used within a ResizeProvider");return e.useEffect(()=>{if(!t)return;s.current||(t(),s.current=!0);const e=a.subscribe(t);return()=>e()},[a,t]),{width:a.width,height:a.height}})(()=>a(Object.entries(s.current).reverse().find(([e,t])=>n>=t)?.[0]));return{breakpoints:s,currentBreakpoint:t}},Pe=({children:s})=>{const n=a(),{currentBreakpoint:r}=Re(),[i,o]=e.useState(!1),[l,c]=e.useState(!1),[u,d]=e.useState(null),[m,p]=e.useState(null),[f,h]=e.useState(Se(g())),[b,x]=e.useState("medium"),[k,y]=e.useState(5),[j,v]=e.useState(5),[w,N]=e.useState(!0),[E,S]=e.useState(!0),[z,C]=e.useState(!0),[M,I]=e.useState(!0),[_,L]=e.useState(!0),[$,D]=e.useState(!0),R=e.useRef({user:(localStorage.getItem(ze("user"))||"").trim()?.length>0?localStorage.getItem(ze("user")):null,isAuto:"false"!==localStorage.getItem(ze("isAuto")),showIntersections:"false"!==localStorage.getItem(ze("showIntersections")),showEffects:"false"!==localStorage.getItem(ze("showEffects")),isLeaderboardOn:"false"!==localStorage.getItem(ze("isLeaderboardOn")),isMusicOn:"false"!==localStorage.getItem(ze("isMusicOn"))}),P=e.useRef(null),O=e.useRef(null),A=e.useCallback(e=>{c(e)},[]),T=e.useCallback((e=null)=>{null===e&&(e=`Nonogrammer*${g().replace(/[^A-Za-z0-9*]/g,"").substring(10)}`),d((e=>Ne(e).replace(/[^A-Za-z0-9*\s]/g,"").replace(/\s+/g," ").substring(0,50))(e))},[]),q=e.useCallback(e=>{void 0===e&&(e=Ee()),h(Se(e))},[]),F=e.useCallback((e="medium")=>{Object.keys(je.game.difficulty.list).includes(e)||(e=je.game.difficulty.default),x(e)},[]),U=e.useCallback(e=>{y(e>=je.game.grid.min&&e<=je.game.grid.max?e:je.game.grid.default)},[]),B=e.useCallback(e=>{v(e>=je.game.grid.min&&e<=je.game.grid.max?e:je.game.grid.default)},[]),V=e.useCallback(N,[N]),G=e.useCallback(S,[S]),K=e.useCallback(C,[C]),X=e.useCallback(I,[I]),H=e.useCallback(L,[L]),Y=e.useCallback(D,[D]),W=e.useMemo(()=>je.game.difficulty.list[b]??je.game.difficulty.list[je.game.difficulty.default],[b]),Z=()=>{null!==P.current&&(clearTimeout(P.current),P.current=null)},J=()=>{null!==O.current&&(clearTimeout(O.current),O.current=null)};return e.useEffect(()=>{const e=localStorage.getItem(ze("user"));T(e??void 0)},[T]),e.useEffect(()=>(Z(),o(!0),P.current=setTimeout(()=>o(!1),500),()=>Z()),[f,b,k,j]),e.useEffect(()=>(J(),l&&(O.current=setTimeout(()=>c(!1),je.game.grid.block.disabledByError)),()=>J()),[l,i]),e.useEffect(()=>{null!==u&&localStorage.setItem(ze("user"),u)},[u]),e.useEffect(()=>localStorage.setItem(ze("isAuto"),w.toString()),[w]),e.useEffect(()=>localStorage.setItem(ze("showIntersections"),E.toString()),[E]),e.useEffect(()=>{localStorage.setItem(ze("showEffects"),z.toString()),z?document.body.classList.remove("effects-off"):document.body.classList.add("effects-off")},[z]),e.useEffect(()=>localStorage.setItem(ze("isMusicOn"),_.toString()),[_]),e.useEffect(()=>localStorage.setItem(ze("isLeaderboardOn"),M.toString()),[M]),e.useEffect(()=>p(n.isLoading||n.error?null:n.country),[n]),e.useEffect(()=>{T(R.current.user),V(R.current.isAuto),G(R.current.showIntersections),K(R.current.showEffects),X(R.current.isLeaderboardOn),H(R.current.isMusicOn)},[T,V,G,K,X,H]),e.useEffect(()=>{["xs","sm"].includes(r)&&(V(!1),G(!1))},[r,V,G]),e.useEffect(()=>{document.documentElement.style.setProperty("--grid-block-size",`${je.game.grid.block.size}rem`),document.documentElement.style.setProperty("--grid-hint-group-padding",`${je.game.grid.hint.groupPadding}rem`),document.documentElement.style.setProperty("--grid-hint-padding",`${je.game.grid.hint.padding}rem`)},[]),t.jsx($e.Provider,{value:{isRefreshing:i,isGlobalError:l,user:u,country:m,seed:f,difficulty:b,probability:W,rows:k,cols:j,isAuto:w,showIntersections:E,showEffects:z,isLeaderboardOn:M,isMusicOn:_,isDrawerShown:$,setIsGlobalError:A,setUser:T,setSeed:q,setDifficulty:F,setRows:U,setCols:B,setIsAuto:V,setShowIntersections:G,setShowEffects:K,setIsLeaderboardOn:X,setIsMusicOn:H,setIsDrawerShown:Y},children:s})},Oe=e.createContext(void 0),Ae=()=>{const t=e.useContext($e);if(!t)throw new Error("useSettings must be used within a SettingsProvider");return t},Te=e.createContext(void 0),qe=({children:a})=>{const[s,n]=e.useState(je.game.scale.default),[r,i]=e.useState(!1),o=e.useRef(null),l=e.useRef({scale:Number(localStorage.getItem(ze("scale")))}),c=e=>Math.round(1e3*Math.min(je.game.scale.max,Math.max(je.game.scale.min,e)))/1e3,u=e.useCallback(e=>n(c(e)),[]),d=e.useCallback(e=>{e.shiftKey&&(e.preventDefault(),n(t=>c(t-Math.sign(e.deltaY||e.deltaX)*je.game.scale.step*2)))},[]),m=e=>{if(2===e.touches.length){const[t,a]=e.touches,s=Math.hypot(a.pageX-t.pageX,a.pageY-t.pageY),r=e=>{if(2===e.touches.length){const[t,a]=e.touches,r=5e-4*(Math.hypot(a.pageX-t.pageX,a.pageY-t.pageY)-s);n(e=>Math.min(je.game.scale.max,Math.max(je.game.scale.min,e+r)))}},i=()=>{document.removeEventListener("touchmove",r),document.removeEventListener("touchend",i)};document.addEventListener("touchmove",r,{passive:!1}),document.addEventListener("touchend",i)}},g=()=>{null!==o.current&&(clearTimeout(o.current),o.current=null)};return e.useEffect(()=>(g(),localStorage.setItem(ze("scale"),s.toString()),document.documentElement.style.setProperty("--scale",s.toString()),i(!0),o.current=setTimeout(()=>i(!1),200),()=>g()),[s]),e.useEffect(()=>(u(l.current.scale&&!isNaN(l.current.scale)?l.current.scale:je.game.scale.default),document.addEventListener("wheel",d,{passive:!1}),document.addEventListener("touchstart",m,{passive:!1}),()=>{document.removeEventListener("wheel",d),document.removeEventListener("touchstart",m)}),[u,d]),t.jsx(Te.Provider,{value:{scale:s,isScaling:r,setScale:u},children:a})},Fe=()=>{const t=e.useContext(Te);if(!t)throw new Error("useScale must be used within a ScaleProvider");return t},Ue=({children:a})=>{const{isAuto:s,isDrawerShown:n,isRefreshing:r}=Ae(),{isScaling:i}=Fe(),[o,l]=e.useState(!1),[c,u]=e.useState("left"),[d,m]=e.useState(void 0),[g,p]=e.useState(void 0),f=e.useCallback(e=>e.classList.contains("game-grid")||e.classList.contains("game-grid-wrapper")||e.classList.contains("game-grid-block"),[]),h=e.useCallback(u,[u]),b=e.useCallback(e=>{if(f(e.target)&&!o&&!i&&(l(!0),s&&"mouse"===e.pointerType))switch(e.button){case 0:u("left");break;case 2:u("right")}},[s,o,i,f]),x=e.useCallback(e=>{f(e.target)&&l(!1)},[f]),k=e.useCallback((e,t)=>{if(e.classList.contains("game-grid-block"))if(!i&&t){const t=Number(e.dataset.row),a=Number(e.dataset.col);m(a),p(t)}else m(void 0),p(void 0)},[i]),y=e.useCallback(e=>k(e.target,!0),[k]),j=e.useCallback(e=>k(e.target,!1),[k]),v=e=>e.preventDefault();return e.useEffect(()=>{m(void 0),p(void 0)},[r]),e.useEffect(()=>(n||(document.addEventListener("pointerdown",b),document.addEventListener("pointerup",x),document.addEventListener("pointercancel",x),document.addEventListener("pointerover",y),document.addEventListener("pointerout",j)),()=>{document.removeEventListener("pointerdown",b),document.removeEventListener("pointerup",x),document.removeEventListener("pointercancel",x),document.removeEventListener("pointerover",y),document.removeEventListener("pointerout",j)}),[n,b,x,y,j]),e.useEffect(()=>(document.addEventListener("contextmenu",v),()=>document.removeEventListener("contextmenu",v)),[]),t.jsx(Oe.Provider,{value:{isClicked:o,isInteracting:c,overCol:d,overRow:g,setIsInteracting:h},children:a})},Be=()=>{const t=e.useContext(Oe);if(!t)throw new Error("useInteraction must be used within a InteractionProvider");return t},Ve=e.createContext(void 0),Ge=e.createContext(void 0),Ke=()=>{const t=e.useContext(Ge);if(!t)throw new Error("useTimer must be used within a TimerProvider");return t},Xe=({children:a})=>{const s=Ae(),{start:n,stop:r,ms:i,reset:o}=Ke(),[l,c]=e.useState([]),[u,d]=e.useState([]),[m,g]=e.useState([]),[f,h]=e.useState([]),b=e.useMemo(()=>Array.from({length:s.rows},()=>Array(s.cols).fill(!1)),[s.rows,s.cols]),x=e.useCallback(()=>{if(!s.seed)return;const e=p(s.seed);c(b.map(t=>t.map(()=>e()<s.probability))),d(b),r(),o()},[b,s.seed,s.probability,r,o]),k=e.useMemo(()=>l.flat().length,[l]),y=e.useMemo(()=>l.flat().filter(e=>!0===e).length,[l]),j=e.useMemo(()=>l.flat().filter((e,t)=>!0===e&&!1!==u.flat()[t]).length,[l,u]),v=e.useMemo(()=>l.flat().filter((e,t)=>!0===e&&"left"===u.flat()[t]).length,[l,u]),w=e.useMemo(()=>l.flat().filter((e,t)=>!1===e&&"right"===u.flat()[t]).length,[l,u]),N=e.useMemo(()=>l.flat().filter((e,t)=>!0===e&&"right"===u.flat()[t]||!1===e&&"left"===u.flat()[t]).length,[l,u]),E=e.useMemo(()=>u.flat().filter(e=>!1!==e).length,[u]),S=e.useMemo(()=>E>0,[E]),z=e.useMemo(()=>l.flat().length===s.rows*s.cols&&u.flat().length===l.flat().length,[l,u,s.rows,s.cols]),C=e.useMemo(()=>{if(0===y||0===j||0===v||0===E)return 0;const e=Math.min(N,k)/k,t=Math.min(w,y)/y;return Math.min(Math.max(0,j/y*(1-e*je.game.score.penalty.errors)*(1-t*je.game.score.penalty.interactions)),1)},[k,j,v,w,N,E,y]),M=e.useMemo(()=>{if(0===k)return 0;const e=1/(1+i/k*je.game.score.penalty.time),t=je.game.score.bonus.difficulty[s.difficulty],a=0===N?je.game.score.bonus.perfect:1,n=je.game.grid.min*je.game.grid.min,r=je.game.grid.max*je.game.grid.max,o=1+(k-n)/(r-n)*.5;return Math.trunc(C*je.game.score.multiplier*t*e*a*o)},[C,k,i,N,s.difficulty]),I=e.useMemo(()=>j>=y,[j,y]),_=e.useCallback(({row:e,col:t,hasInteracted:a})=>{d(s=>{const n=[...s];return n[e]=[...n[e]],n[e][t]=a,n})},[]),L=e.useCallback(()=>{if(!z)return;let e,t,a;const n=Array.from({length:s.rows},()=>[]);for(let r=0;r<s.rows;r++){t=[],a=[];for(let i=0;i<s.cols;i++)e=l[r][i],t.push(i),a.push(!(!1===u[r][i]||u[r].slice(0,i).includes(!1)&&u[r].slice(i+1).includes(!1))),(l[r][i+1]!==l[r][i]||i>=s.cols-1)&&(n[r].push({total:t.length,filled:e,blocks:t,found:a,isDone:!a.includes(!1)}),t=[],a=[])}g(n)},[z,l,u,s.rows,s.cols]),$=e.useCallback(()=>{if(!z)return;let e,t,a;const n=Array.from({length:s.cols},()=>[]);for(let r=0;r<s.cols;r++){t=[],a=[];for(let i=0;i<s.rows;i++)e=l[i][r],t.push(i),a.push(!(!1===u[i][r]||u.slice(0,i).map(e=>e[r]).includes(!1)&&u.slice(i+1).map(e=>e[r]).includes(!1))),(l[i+1]?.[r]!==l[i][r]||i>=s.rows-1)&&(n[r].push({total:t.length,filled:e,blocks:t,found:a,isDone:!a.includes(!1)}),t=[],a=[])}h(n)},[z,l,u,s.rows,s.cols]),D=e.useMemo(()=>({rows:m.map(e=>e.every(e=>!0===e.isDone)),cols:f.map(e=>e.every(e=>!0===e.isDone))}),[m,f]),R=e.useMemo(()=>C>=je.game.score.win,[C]);return e.useEffect(()=>x(),[x]),e.useEffect(()=>{L(),$()},[L,$]),e.useEffect(()=>(S&&I?r():S&&n(),()=>r()),[S,I,n,r]),t.jsx(Ve.Provider,{value:{isReady:z,isStarted:S,isCompleted:I,isDone:D,hasWin:R,grid:l,interactions:u,hints:{rows:m,cols:f},total:k,totalAvailable:y,totalFound:j,totalCorrect:v,totalErrors:N,totalInteractions:E,rating:C,score:M,init:x,setInteraction:_},children:a})},He=()=>{const t=e.useContext(Ve);if(!t)throw new Error("useEngine must be used within a EngineProvider");return t},Ye={years:31536e3,months:2592e3,days:86400,hours:3600,minutes:60,seconds:1},We=()=>(new Date).getTime(),Ze=e=>{const t={};let a=!1,s=Math.abs(e/1e3);return Object.entries(Ye).forEach(([e,a])=>{t[e]=Math.floor(s/a),s-=(t[e]??0)*a}),Object.fromEntries(Object.entries(t).filter(([e,t])=>!(!a&&"seconds"!==e)||(0!==t&&(a=!0),a)))},Je=({children:a})=>{const[s,n]=e.useState(null),[r,i]=e.useState(0),[o,l]=e.useState({}),[c,u]=e.useState(!0),d=e.useRef(null),m=e.useRef(null),g=e.useCallback(()=>{null!==d.current&&(clearInterval(d.current),d.current=null),null!==m.current&&(clearInterval(m.current),m.current=null),u(!0)},[]),p=e.useCallback(()=>{g(),n(null),i(0),l({seconds:0}),u(!0)},[g]),f=e.useCallback(()=>{p(),n(We())},[p]),h=e.useCallback(()=>{s&&(i(Math.abs(We()-s)),l(Ze(We()-s)))},[s]),b=e.useCallback(()=>{g(),h(),d.current=setInterval(h,1e3),s&&(m.current=setInterval(()=>u(e=>!e),500))},[h,g,s]);return e.useEffect(()=>{b()},[b]),e.useEffect(()=>(p(),()=>g()),[p,g]),t.jsx(Ge.Provider,{value:{ms:r,timeUnits:o,blink:c,start:f,stop:g,reset:p},children:a})},Qe=e.createContext(void 0),et=({children:a})=>{const{isMusicOn:s}=Ae(),n=e.useRef({}),r=e=>n.current[e]?n.current[e]:null,i=e.useCallback(e=>{const t=r(e);t&&s&&("unloaded"===t.state()?(t.load(),t.once("load",()=>t.play())):"loaded"===t.state()&&t.play())},[s]);return e.useEffect(()=>{const e=n.current;return()=>Object.values(e).forEach(e=>e.unload())},[]),e.useEffect(()=>{const e=e=>e.stopImmediatePropagation(),t=t=>{e(t);const a=b.Howler.ctx;a&&"running"!==a.state&&a.resume().then(()=>{})};return document.addEventListener("pointerdown",t,{once:!0}),document.addEventListener("pointerup",e,{once:!0}),()=>{document.removeEventListener("pointerdown",t),document.removeEventListener("pointerup",e)}},[]),t.jsx(Qe.Provider,{value:{ref:r,add:(e,t,a=1)=>{n.current[e]||(n.current[e]=new b.Howl({src:[t],volume:a}))},play:i,volume:(e,t)=>{const a=r(e);a&&a.volume(Math.min(1,Math.max(0,t)))}},children:a})},tt=()=>{const t=e.useContext(Qe);if(!t)throw new Error("useAudio must be used within a AudioProvider");return t},at=()=>{const{i18n:t}=l(),a=e.useCallback(e=>{try{return new Intl.NumberFormat(t.language,e)}catch(a){return new Intl.NumberFormat(je.locale.allowed.default,e)}},[t.language]);return{number:(e,t)=>a({style:"decimal",minimumFractionDigits:0,maximumFractionDigits:t??0}).format(e??0),percentage:(e,t)=>a({style:"percent",minimumFractionDigits:0,maximumFractionDigits:t??0}).format(e??0)}},st=()=>{const{totalAvailable:a,totalFound:n}=He(),{percentage:r}=at(),i=e.useMemo(()=>Math.round(100*n/a*100)/100,[a,n]),o=e.useMemo(()=>i>0&&i<100,[i]);return t.jsxs("div",{className:s(["relative w-full overflow-hidden contain-layout","transition-[height]",o?"h-[1rem]":"h-[0rem]"]),"aria-hidden":!0,children:[t.jsx("progress",{className:"progress progress-accent block bg-base-100 w-full h-full border-none rounded-none",value:n,max:a}),t.jsx("div",{className:s(["badge badge-xs badge-accent rounded-none font-black","absolute bottom-0 -translate-x-full","text-base-100","transition-[left,opacity] duration-150 will-change-transform",{"opacity-0":!o}]),style:{left:`${i}%`,contentVisibility:"auto"},children:r(i/100)})]})},nt=()=>{const[a,s]=e.useState(null);return e.useEffect(()=>{(async()=>{const{renderToStaticMarkup:e}=await pe(async()=>{const{renderToStaticMarkup:e}=await import("./react-dom-COoTj2QG.js").then(e=>e.s);return{renderToStaticMarkup:e}},__vite__mapDeps([4,1,2])),a=e(t.jsx(x,{size:24,color:Ce("--color-primary")}));s(`data:image/svg+xml,${encodeURIComponent(a)}`)})()},[]),a?t.jsx("link",{rel:"icon",href:a}):null},rt=()=>{const{i18n:a}=l(),{seed:s,rows:n,cols:r,difficulty:i}=Ae();return e.useEffect(()=>document.documentElement.setAttribute("lang",a.language),[a.language]),t.jsxs(t.Fragment,{children:[t.jsx("title",{children:`${a.t("title")} v${he} | ${r}x${n} ${a.t(`difficulties.${i}`)} - ${s}`}),t.jsx("meta",{name:"description",content:a.t("description",{title:a.t("title")})}),t.jsx(nt,{}),je.preload.map((e,a)=>t.jsx("link",{rel:e.rel,href:e.href,crossOrigin:e.crossorigin},a)),je.meta.map((e,a)=>t.jsx("meta",{name:e.name,httpEquiv:e.httpEquiv,content:Array.isArray(e.content)?e.content.join("; "):e.content},a))]})},it=()=>{const{seed:a,isRefreshing:s}=Ae(),[n,r]=e.useState(""),i=e.useRef(null),o=e.useMemo(()=>{const e=n||a;if(e.length<10)return[e];const t=[],s=Math.min(Math.round(e.length/10),5),r=Math.ceil(e.length/s);for(let a=0;a<e.length&&t.length<s;a+=r)t.push(e.slice(a,a+r));return t},[n,a]),l=e.useCallback(()=>r(Ee()),[]),c=()=>{null!==i.current&&(clearInterval(i.current),i.current=null)};return e.useEffect(()=>(c(),s?(l(),i.current=setInterval(l,100)):r(""),()=>c()),[s,l]),t.jsx("div",{className:"absolute top-0 bottom-0 left-0 right-0 pointer-events-none overflow-hidden contain-layout","aria-hidden":!0,children:t.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-1/2 w-[110%] max-h-[100vh] text-[16vw] font-black italic leading-[0.8em] tracking-tighter text-base-100 text-center",children:o.map((e,a)=>t.jsx("div",{children:e},a))})})},ot=({size:e="md"})=>{const{i18n:a}=l();return t.jsxs("h1",{className:s(["block font-black text-primary align-middle","md"===e?"text-2xl max-w-[200px] leading-[0.9em]":"text-4xl max-w-[250px] leading-[0.85em]"]),children:[t.jsx(x,{className:"inline-block md:block w-[1em] h-[1em] scale-250 origin-[80%_50%] md:origin-center mr-5"}),t.jsxs("span",{className:"relative inline-block",children:[a.t("title"),t.jsxs("span",{className:"absolute top-0 left-0 -translate-1/2 badge badge-xs badge-accent",children:["v",he]})]})]})},lt=({className:a,children:n})=>{const r=e.useMemo(()=>n?e.Children.map(n,(t,a)=>e.isValidElement(t)?e.cloneElement(t,{isFirst:0===a}):t):null,[n]);return t.jsx("div",{className:s(["btn gap-0 items-stretch h-auto p-0 contain-layout",a]),"aria-hidden":!0,children:r})},ct=({title:a,subTitle:n,description:r,icon:i,isFirst:o,className:l})=>t.jsxs("div",{className:s(["flex flex-row gap-1 items-center","min-w-[75px] px-2 py-1 pointer-events-none",l,{"border-l-1 border-black/10":!o}]),children:[e.cloneElement(i,{className:"text-svg-inline text-2xl"}),t.jsxs("span",{className:"flex flex-col items-start",children:[t.jsxs("span",{className:"text-xs leading-[1.2em]",children:[t.jsx("strong",{children:a}),n?t.jsxs("span",{className:"text-xxs leading-[1em]",children:["/",n]}):null]}),t.jsx("span",{className:"text-xxs leading-[1.2em]",children:r})]})]}),ut=({difficulty:e,className:a=""})=>(a=s(["text-svg-inline",a]),{easy:t.jsx(j,{className:a}),medium:t.jsx(y,{className:a}),hard:t.jsx(k,{className:a})}[e]),dt=()=>{const{i18n:e}=l(),{rows:a,cols:s,difficulty:n}=Ae(),{scale:r}=Fe(),{percentage:i}=at();return t.jsxs(lt,{className:"btn-outline btn-primary",children:[t.jsx(ct,{title:`${s}×${a}`,description:e.t("grid"),icon:t.jsx(v,{})}),t.jsx(ct,{title:e.t(`difficulties.${n}`),description:e.t("difficulty"),icon:t.jsx(ut,{difficulty:n})}),t.jsx(ct,{title:i(r),description:e.t("scale"),icon:t.jsx(w,{})})]})},mt=({timeUnits:a,onlyTimeUnits:n=[],forceTimeUnits:r=!1,leadingZero:i=!1,units:o="normal",separator:c="auto",blink:u=!1,className:d=""})=>{const{i18n:m}=l(),g=e.useMemo(()=>n.length>0?Object.keys(a).filter(e=>n.includes(e)):Object.keys(a),[a,n]);return g.length>0?t.jsx("div",{className:`counter ${d}`.trim(),children:g.map((n,l)=>{const d=a[n]??0;return r||"seconds"===n||d>0?t.jsx(e.Fragment,{children:t.jsxs("div",{className:s([`counter-${n}`,"text-nowrap"]),children:[t.jsx("span",{className:"counter-value",children:i?("0"+d).slice(-2):d}),!1!==o&&t.jsx("span",{className:"counter-label",children:"abbr"===o?m.t(`timeUnits.${n}`,{count:d}).toLowerCase().substring(0,1):` ${m.t(`timeUnits.${n}`,{count:d}).toLowerCase()}`}),!1!==c&&l<g.length-1?t.jsx("span",{className:s(["counter-separator",{"opacity-0":u}]),children:"auto"===c?"normal"===o&&l<g.length-2||"abbr"===o||!1===o?", ":"normal"===o?` ${m.t("and").toLowerCase()} `:null:c}):null]})},n):null})}):null},gt=()=>{const{showEffects:e}=Ae(),{timeUnits:a,blink:n}=Ke(),{isStarted:r,isCompleted:i}=He();return t.jsxs("div",{className:s(["btn",r||i?"btn-outline":"btn-dash text-primary/30 border-primary/30",i?"btn-accent":"btn-primary","flex flex-col gap-0 pointer-events-none h-auto px-2 py-1",{"transition-[scale,background-color,color,border-color,opacity] duration-500 ease-in-out":e,"scale-95":!n}]),children:[t.jsx(mt,{timeUnits:a,onlyTimeUnits:["days","months","years"],separator:!1,className:"flex gap-x-1 text-xxs leading-[1.5em]"}),t.jsx(mt,{timeUnits:a,onlyTimeUnits:["seconds","minutes","hours"],forceTimeUnits:!0,leadingZero:!0,units:!1,separator:":",blink:n,className:"flex text-xl font-mono leading-[1.1em]"})]})},pt=({name:e,country:a=null,variant:r="marble",className:i=""})=>t.jsxs("div",{className:s(["avatar relative",i]),children:[t.jsx(n,{name:`${e||""}${a||""}`,variant:r,colors:[Ce("--color-primary"),Ce("--color-secondary"),Ce("--color-accent"),Ce("--color-info"),Ce("--color-warning")],className:"w-full"}),a?t.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-1/2 badge badge-outline badge-xs !border-base-200 !text-base-200 px-1 rounded-full text-xxs font-black",children:a}):null]}),ft=()=>{const{i18n:a}=l(),{user:n,country:r,showEffects:i,setIsDrawerShown:o}=Ae(),{play:c}=tt(),[u,d]=e.useState(!1);return t.jsxs("button",{type:"button",className:"btn btn-lg btn-outline btn-accent hover:btn-primary text-primary hover:text-accent rounded-full p-1 sm:pe-5 h-auto font-normal max-w-[150px]",onPointerEnter:()=>{c("grid-block-over"),d(!0)},onPointerLeave:()=>d(!1),onClick:()=>o(!0),children:[t.jsxs("div",{className:"bg-accent w-[3rem] sm:w-[2.5rem] aspect-square rounded-full overflow-hidden relative",children:[t.jsx(pt,{name:n,country:r,className:s({"transition-opacity duration-300":i,"opacity-0":u})}),t.jsx(N,{className:s(["text-svg-inline absolute top-1/2 left-1/2 -translate-1/2","text-3xl sm:text-2xl text-primary",{"transition-[opacity,scale] duration-300":i,"opacity-0 scale-150":!u}])})]}),t.jsxs("div",{className:"hidden sm:flex flex-col flex-1 min-w-0 text-xs text-start leading-[1em]",children:[t.jsx("div",{className:"font-bold",children:a.t("user")}),t.jsx("div",{className:"overflow-hidden text-ellipsis whitespace-nowrap",children:n})]})]})},ht=()=>{const{i18n:e}=l(),{number:a}=at(),{showEffects:n}=Ae(),{total:r,totalAvailable:i,totalInteractions:o,totalFound:c,totalErrors:u}=He();return t.jsxs(lt,{className:"btn-outline btn-primary",children:[t.jsx(ct,{title:a(i-c),subTitle:a(r-o),description:t.jsxs(t.Fragment,{children:[t.jsx("strong",{children:e.t("status.available")}),"/",e.t("status.total")]}),icon:t.jsx(E,{}),className:"text-primary"}),t.jsx(ct,{title:a(c),description:e.t("status.found"),icon:t.jsx(S,{}),className:s(["bg-accent/10",c>0?"text-accent":"text-accent/20",{"transition-[color] duration-500":n}])}),t.jsx(ct,{title:a(u),description:e.t("status.errors"),icon:t.jsx(z,{}),className:s(["bg-error/10",u>0?"text-error":"text-error/20",{"transition-[color] duration-500":n}])})]})},bt=()=>{const{isRefreshing:a,setSeed:n,showEffects:r}=Ae(),{play:i}=tt(),[o,l]=e.useState(!1);return t.jsx("button",{type:"button",className:s(["btn btn-sm btn-outline btn-circle",o?"!bg-secondary text-white":"btn-accent"]),disabled:a||o,onPointerEnter:()=>i("grid-block-over"),onClick:()=>{a||o||(n(),r&&l(!0))},children:t.jsx(C,{className:s(["text-svg-inline text-xl pointer-events-none",{"duration-500":r,"transition-[rotate] -rotate-360":r&&(a||o),"transition-none rotate-0":!a&&!o}]),onTransitionEnd:()=>l(!1)})})},xt=()=>{const{i18n:a}=l(),{isInteracting:n,setIsInteracting:r}=Be(),{isScaling:i}=Fe(),{isAuto:o,showEffects:c,isDrawerShown:u,setIsAuto:d}=Ae(),{play:m}=tt(),[g,p]=e.useState(!1),f=e.useRef(!1),h=e.useCallback(e=>{"Space"===e.code&&(f.current||(f.current=!0,d(!1),p(e=>!e)),e.preventDefault())},[d]),b=e=>{"Space"===e.code&&(f.current=!1)};return e.useEffect(()=>{o||r(g?"right":"left")},[o,g,r]),e.useEffect(()=>{o&&p("right"===n)},[o,g,n]),e.useEffect(()=>m("grid-block-correct"),[g,m]),e.useEffect(()=>(u||(window.addEventListener("keydown",h),window.addEventListener("keyup",b)),()=>{window.removeEventListener("keydown",h),window.removeEventListener("keyup",b)})),t.jsxs("div",{className:"flex flex-col gap-1 items-center",children:[t.jsxs("kbd",{className:"kbd kbd-xs",children:[t.jsx(M,{className:"text-svg-inline me-1"})," spacebar"]}),t.jsxs("label",{className:s(["indicator indicator-middle indicator-center outline-2 pointer-events-auto","flex gap-4 items-center justify-center contain-layout",g?"bg-primary":"bg-accent","rounded-full text-xl py-1 px-6",{"outline-secondary pointer-events-none":o,"cursor-pointer":!o,"outline-primary/0 hover:outline-primary":!o&&!g,"outline-accent/0 hover:outline-accent":!o&&g,"inset-shadow-sm inset-shadow-black/20":c,"transition-[background-color,outline-color,opacity] duration-300":c,"opacity-30":i}]),onPointerEnter:()=>m("grid-block-over"),children:[t.jsx("span",{className:s(["pointer-events-none will-change-transform",g?"text-white/30 scale-100":"text-white scale-140",{"drop-shadow":c,"transition-transform duration-300":c}]),children:t.jsx(S,{className:"text-svg-inline block"})}),t.jsx("input",{type:"checkbox",className:s(["pointer-events-none toggle toggle-xl toggle-white","bg-white border-white text-accent","checked:bg-white checked:border-white checked:text-primary",{"shadow-lg shadow-black/20":c}]),checked:g,onChange:()=>p(e=>!e)}),t.jsx("span",{className:s(["pointer-events-none will-change-transform",g?"text-white scale-140":"text-white/50 scale-100",{"drop-shadow":c,"transition-transform duration-300":c}]),children:t.jsx(I,{className:"text-svg-inline block"})}),t.jsxs("div",{className:s(["pointer-events-none indicator-item badge badge-secondary rounded-full gap-1","font-bold uppercase",o?"bg-secondary/80 backdrop-blur-sm":"opacity-0"]),children:[t.jsx(_,{className:"text-svg-inline"}),a.t("autoShort")]})]})]})},kt=()=>{const{isMusicOn:e,showEffects:a,isAuto:s,showIntersections:n,isLeaderboardOn:r}=Ae();return t.jsxs("div",{className:"flex flex-col gap-1.5 px-1.5 py-3 bg-base-200/50 text-svg-inline text-sm text-base-content/30 rounded-full backdrop-blur-xs",children:[e?t.jsx(L,{className:"text-secondary"}):t.jsx($,{}),a?t.jsx(D,{className:"text-secondary"}):t.jsx(R,{}),s?t.jsx(_,{className:"text-secondary"}):t.jsx(P,{}),n?t.jsx(O,{className:"text-secondary"}):t.jsx(A,{}),r?t.jsx(T,{className:"text-secondary"}):t.jsx(q,{})]})},yt=e.memo(()=>t.jsx("header",{className:"flex absolute top-0 bottom-0 left-0 right-0 pointer-events-none contain-layout",children:t.jsxs("div",{className:"p-5 md:p-10 flex flex-1 flex-col gap-1 justify-between",children:[t.jsxs("div",{className:"flex flex-row gap-1 justify-between flex-wrap sm:flex-nowrap relative",children:[t.jsx("div",{className:"sm:min-w-1/3",children:t.jsx(ot,{})}),t.jsx("div",{className:"order-last sm:order-none w-full flex justify-center self-center",children:t.jsx(gt,{})}),t.jsxs("div",{className:"flex gap-1 sm:min-w-1/3 sm:justify-end items-center self-center",children:[t.jsx(bt,{}),t.jsx(ft,{})]})]}),t.jsx("div",{className:"flex flex-row gap-1 justify-between",children:t.jsx(kt,{})}),t.jsxs("div",{className:"min-h-[1rem] flex flex-col md:flex-row gap-1 md:justify-between items-center md:items-end flex-wrap lg:flex-nowrap",children:[t.jsx("div",{className:"lg:min-w-1/3",children:t.jsx(ht,{})}),t.jsx("div",{className:"order-first mb-5 lg:mb-0 lg:order-none w-full flex justify-center",children:t.jsx(xt,{})}),t.jsx("div",{className:"lg:min-w-1/3 md:flex md:justify-end",children:t.jsx(dt,{})})]})]})})),jt=({mountIf:t,timeout:a,className:n="",unmountOnExit:r=!0,onMounted:i,onEntering:o,onDone:l,onExiting:c,onUnmounted:u,children:d})=>{const[m,g]=e.useState(t),[p,f]=e.useState("idle"),h=e.useRef(null),b=e.useRef(null),x=e.useRef(null),k=e.useRef(null),y=e.useMemo(()=>"object"==typeof a&&a.delay?a.delay:0,[a]),j=e.useMemo(()=>"object"==typeof a?a.entering??0:a,[a]),v=e.useMemo(()=>"object"==typeof a?a.exiting??0:a,[a]),w=e.useMemo(()=>j>0?"object"==typeof a&&a.start&&a.start>=50?a.start:50:0,[a,j]),N=e.useMemo(()=>["entering","done"].includes(p),[p]),E=e.useMemo(()=>["mounted","entering"].includes(p),[p]),S=()=>{[h,b,x,k].forEach(e=>{null!==e.current&&(clearTimeout(e.current),e.current=null)})};if(e.useEffect(()=>(S(),t?h.current=setTimeout(()=>{g(!0),f("mounted"),b.current=setTimeout(()=>{f("entering"),x.current=setTimeout(()=>f("done"),j)},w)},y):(f("exiting"),k.current=setTimeout(()=>f("unmounted"),v)),()=>S()),[t,y,w,j,v,r]),e.useEffect(()=>{switch(p){case"mounted":i&&i();break;case"entering":o&&o();break;case"done":l&&l();break;case"exiting":c&&c();break;case"unmounted":u&&u(),r&&g(!1),f("idle")}},[p,i,o,l,c,u,r]),!m)return null;return d({className:s([`mount-transition-${p}`,{[`mount-transition ${n}`]:N}]),status:p,isEntering:N,isMounting:E})},vt=()=>{const{showEffects:e}=Ae(),{isInteracting:a}=Be();return t.jsx(jt,{mountIf:"right"===a,timeout:e?400:0,children:({isEntering:a})=>t.jsx("div",{className:s(["absolute top-0 bottom-0 left-0 right-0 pointer-events-none overflow-hidden",a?"bg-base-200/50":"bg-base-200/0",{"transition-[background-color] duration-400":e}]),"aria-hidden":!0,children:t.jsx("p",{className:s(["absolute top-1/2 left-1/2 -translate-1/2 text-[250vw] leading-[0.8em] text-base-200",a?"opacity-100 scale-100":"opacity-0 scale-150",{"transition-[opacity,scale] duration-400":e}]),children:t.jsx(I,{className:"text-svg-inline"})})})})},wt=()=>{(()=>{const{i18n:t}=l(),a=ee(),s=te(),{logEvent:n}=ke(),r=ae(),{rows:i,cols:o,difficulty:c,seed:u,setRows:d,setCols:m,setDifficulty:g,setSeed:p}=Ae(),f=e.useRef(!1),h=e.useMemo(()=>r.pathname.split("/")[2]??je.pages.default,[r.pathname]),b=e.useMemo(()=>"string"==typeof t.options.fallbackLng?t.options.fallbackLng:je.locale.allowed.default,[t.options.fallbackLng]),x=e.useMemo(()=>a.language&&b&&!Object.keys(t.options.resources??{}).includes(a.language)?b:a.language&&t.language!==a.language?t.language:je.locale.allowed.default,[t.options.resources,t.language,a.language,b]),k=e.useCallback((e,t)=>Number.isNaN(t)||t===e?e:t>=je.game.grid.min&&t<=je.game.grid.max?t:je.game.grid.default,[]),y=e.useMemo(()=>Object.keys(je.game.difficulty.list).includes(a.difficulty)?a.difficulty!==c?a.difficulty:c:je.game.difficulty.default,[a.difficulty,c]),j=e.useMemo(()=>a.seed||u,[a.seed,u]),v=e.useCallback(()=>{if(!f.current&&(t.changeLanguage(x),h===je.pages.default)){const e=k(i,Number(a.rows)),t=k(o,Number(a.cols));i!==e&&d(e),o!==t&&m(t),c!==y&&g(y),u!==j&&p(j)}},[t,h,x,k,y,j,a.rows,a.cols,i,o,c,u,d,m,g,p]),w=e.useCallback(()=>{f.current=!0,h===je.pages.default?s(`/${t.language}/${h}/${o}/${i}/${c}/${u}`,{replace:!1}):s(`/${t.language}/${h}`,{replace:!0})},[s,h,t.language,o,i,c,u]);e.useEffect(()=>{n("page_view",{page_location:window.location.href,page_path:r.pathname,page_title:document.title})},[n,r.pathname]),e.useEffect(v,[v]),e.useEffect(w,[w])})();const{showEffects:a}=Ae();return t.jsxs("main",{className:"flex flex-1 relative",children:[a?t.jsx(it,{}):null,t.jsx(vt,{}),t.jsx(se,{}),t.jsx(yt,{})]})},Nt=e=>Math.round(Math.max(0,Math.min(255,e))),Et=e=>{let t=0,a=0,s=0;if((e=>/^oklch\(([\d.]+)%?\s+([\d.]+)\s+([\d.]+)\)$/.test(e))(e)){const n=e.match(/^oklch\(([\d.]+)%?\s+([\d.]+)\s+([\d.]+)\)$/);if(n&&n[1]&&n[2]&&n[3]){let r=parseFloat(n[1]);const i=parseFloat(n[2]),o=parseFloat(n[3]);e.includes("%")&&(r/=100);const l=f({mode:"oklch",l:r,c:i,h:o}),c=h(l);c&&(t=255*c.r,a=255*c.g,s=255*c.b)}}else if((e=>/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/.test(e))(e)){const n=e.match(/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/);n&&(t=Number(n[1]),a=Number(n[2]),s=Number(n[3]))}else if((e=>/^#[0-9A-Fa-f]{3,6}$/.test(e))(e)){const n=h(e);n&&(t=255*n.r,a=255*n.g,s=255*n.b)}return[Nt(t),Nt(a),Nt(s)]},St=({isOver:e})=>{const{showEffects:a}=Ae();return t.jsx(jt,{mountIf:e,timeout:a?{entering:150,exiting:600}:0,children:({isEntering:e,isMounting:n})=>t.jsx("div",{className:s(["game-grid-block-void","absolute top-0 bottom-0 left-0 right-0 pointer-events-none","bg-primary",e?"opacity-100 scale-100":"opacity-0 scale-80",{"transition-[opacity,scale]":a,"duration-150":a&&n,"duration-600":a&&!n}])})})},zt=({hasInteracted:a,isError:n})=>{const{showEffects:r}=Ae(),{isCompleted:i}=He(),o=e.useMemo(()=>r&&!1!==a&&Math.random()<.1,[r,a]),l=e.useMemo(()=>o?Math.round(5*Math.random()*100)/100:0,[o]);return t.jsx(jt,{mountIf:!1!==a||!1===a&&i,timeout:r?200:0,children:({isEntering:e})=>t.jsx("div",{className:s(["game-grid-block-empty","absolute top-0 bottom-0 left-0 right-0 pointer-events-none","bg-base-200 text-sm",e?"opacity-100 scale-100":"opacity-0 scale-10",{"game-grid-block-empty-glitch":o,"game-grid-block-empty-error":n,"transition-[opacity,scale] duration-200":r}]),style:{"--glitch-delay":`${l}s`}})})},Ct=({isTarget:e})=>{const{showIntersections:a}=Ae();if(a)return t.jsx("div",{className:s(["absolute top-0 bottom-0 left-0 right-0 pointer-events-none",{"bg-secondary/10":!e,"border-2 border-secondary":e}])})},Mt=({hasInteracted:a,isFilled:n,isError:r,isOver:i})=>{const{showEffects:o}=Ae(),{isCompleted:l}=He(),c=e.useRef(null);return t.jsx(jt,{mountIf:!n&&!1!==a||l&&!1===a,timeout:o?400:0,children:({isEntering:e})=>t.jsx("div",{ref:c,className:s(["grid-block-icon","absolute top-0 bottom-0 left-0 right-0 pointer-events-none","flex items-center justify-center",e?"opacity-100 scale-100":"opacity-0 scale-1",r?"text-error":!l&&i&&!1===a?"text-base-content":"text-primary",{"transition-[opacity,scale] duration-400":o}]),children:t.jsx("div",{className:"align-middle leading-1 relative -top-[0.07em] font-black",children:"×"})})})},It=()=>{const{isCompleted:e}=He(),{showEffects:a}=Ae();return t.jsx("div",{className:s(["game-grid-block-filled-perfect","absolute top-0 bottom-0 left-0 right-0 pointer-events-none scale-500",{"transition-opacity duration-500":a,"opacity-0":!e}])})},_t=()=>{const a=e.useRef(Math.round(5*Math.random()*100)/100);return t.jsx("div",{className:"game-grid-block-filled-shining absolute top-0 bottom-0 left-0 right-0 pointer-events-none scale-500 mix-blend-overlay opacity-70",style:{"--shining-delay":`${a.current}s`}})},Lt=({hasInteracted:a,isError:n})=>{const{totalErrors:r}=He(),{showEffects:i}=Ae(),o=e.useMemo(()=>i&&"left"===a&&Math.random()<.3,[i,a]),l=e.useMemo(()=>i&&!1!==a&&Math.random()<.4,[i,a]),c=e.useMemo(()=>l?Math.round(.5*Math.random()*100)/100:0,[l]);return t.jsx(jt,{mountIf:!1!==a,timeout:i?200:0,children:({isEntering:e})=>t.jsxs("div",{className:s("game-grid-block-filled","absolute top-0 bottom-0 left-0 right-0 text-sm pointer-events-none",e?"opacity-100 scale-100":"opacity-0 scale-10",{"transition-[opacity,scale] duration-200":i,"bg-accent":!n,"bg-error":n,"game-grid-block-filled-random":c>0}),style:{"--filled-random-opacity":c},children:[!1===a||0!==r||n?null:t.jsx(It,{}),o?t.jsx(_t,{}):null]})})},$t=({mountIf:a,delay:n})=>{const[r,i]=e.useState(!0);return t.jsx(jt,{mountIf:a&&r,timeout:{delay:n,entering:1e3,exiting:0},onDone:()=>i(!1),children:()=>t.jsx("div",{className:s(["game-grid-block-done","absolute top-0 bottom-0 left-0 right-0 pointer-events-none","bg-white/80"])})})},Dt=({row:a,col:n})=>{const{grid:r,setInteraction:i,interactions:o,isCompleted:l,isReady:c,isDone:u}=He(),{isRefreshing:d,isGlobalError:m,rows:g,cols:p,setIsGlobalError:f,showIntersections:h,showEffects:b}=Ae(),{isClicked:x,isInteracting:k,overCol:y,overRow:j}=Be(),{play:v}=tt(),[w,N]=e.useState(!1),E=e.useMemo(()=>y===n&&j===a,[y,j,n,a]),S=e.useMemo(()=>!(!c||!r[a][n])&&r[a][n],[c,r,a,n]),z=e.useMemo(()=>c&&o[a][n],[c,o,a,n]),C=e.useMemo(()=>c&&("left"===z&&!S||"right"===z&&S),[c,z,S]),M=e.useMemo(()=>b&&!1===z&&Math.random()<.3,[b,z]),I=e.useMemo(()=>b&&!1===z&&!d?Math.random()<.15:0,[b,z,d]),_=e.useMemo(()=>M?Math.round(.4*Math.random()*100)/100:0,[M]),L=e.useMemo(()=>I?Math.round(.9*Math.random()*100)/100:0,[I]),$=e.useMemo(()=>l||m||!1!==z,[l,m,z]);return e.useEffect(()=>{!$&&E&&x&&i({row:a,col:n,hasInteracted:k})},[a,n,i,$,E,x,k,C]),e.useEffect(()=>(C&&f(!0),()=>f(!1)),[C,f]),e.useEffect(()=>{$||!E||x||v("grid-block-over")},[$,E,x,v]),e.useEffect(()=>{w||!1===z||(v(C?"grid-block-wrong":"grid-block-correct"),N(!0))},[w,z,C,v]),t.jsx("div",{role:"button",className:s(["game-grid-block","relative aspect-square overflow-hidden",{"game-grid-block-t-strong":a%5==0,"game-grid-block-l-strong":n%5==0,"game-grid-block-b-strong":a>=g-1,"game-grid-block-r-strong":n>=p-1,"game-grid-block-glitching":I,"transition-[background-color] duration-100":b&&I,"cursor-pointer":!$}]),"data-row":a,"data-col":n,style:{"--block-random-opacity":M?_:null,"--glitching-delay":I?`${L}s`:null},children:d?null:t.jsxs(t.Fragment,{children:[l?null:t.jsx(St,{isOver:!$&&E}),S?t.jsx(Lt,{hasInteracted:z,isError:C}):t.jsx(zt,{hasInteracted:z,isError:C}),t.jsx(Mt,{hasInteracted:z,isFilled:S,isError:C,isOver:!$&&E}),b?t.jsxs(t.Fragment,{children:[t.jsx($t,{mountIf:u.cols[n],delay:100*a}),t.jsx($t,{mountIf:u.rows[a],delay:100*n})]}):null,!h||l||y!==n&&j!==a?null:t.jsx(Ct,{isTarget:E})]})})},Rt=({total:e,isDone:a})=>{const{showEffects:n}=Ae();return t.jsx("span",{className:s(["min-w-[1.3em] h-[1.3em] leading-[1.3em] text-center",{"transition-[color] duration-200":n,"text-accent":a,"text-primary font-bold":!a}]),children:e})},Pt=({type:e,hints:a,isLineDone:n})=>{const{isRefreshing:r,showEffects:i}=Ae();return a?t.jsx("div",{className:s(["game-grid-hint-group","flex flex-grow items-center justify-end","col"===e?"game-grid-hint-group-col flex-col":"game-grid-hint-group-row flex-row",{"transition-[background-color] duration-400":i,"bg-accent/25":n}]),children:r?null:a.map((e,a)=>e.filled?t.jsx(Rt,{total:e.total,isDone:n||e.isDone},a):null)}):null},Ot=()=>{const{cols:e,rows:a}=Ae();return t.jsx("div",{className:"game-grid-hint-size flex flex-1 items-end justify-end font-bold text-white leading-[1.3em]",children:t.jsxs("div",{className:"flex items-end group pointer-events-auto",children:[t.jsxs("div",{className:"relative",children:[t.jsx("span",{className:"transition-[opacity,filter] duration-500 group-hover:opacity-80 group-hover:blur-[0.2rem]",children:e}),t.jsx(F,{className:"text-svg-inline absolute top-1/2 left-1/2 -translate-1/2 text-primary opacity-0 transition-opacity duration-200 group-hover:opacity-100"})]}),t.jsx("div",{children:"×"}),t.jsxs("div",{className:"relative",children:[t.jsx("span",{className:"transition-[opacity,filter] duration-500 group-hover:opacity-80 group-hover:blur-[0.2rem]",children:a}),t.jsx(U,{className:"text-svg-inline absolute top-1/2 left-1/2 -translate-1/2 text-primary opacity-0 transition-opacity duration-200 group-hover:opacity-100"})]})]})})},At=({row:e,col:a})=>{const{hints:n,isCompleted:r,isDone:i}=He(),{rows:o,cols:l,showIntersections:c}=Ae(),{overCol:u,overRow:d}=Be();return t.jsxs("div",{className:s(["game-grid-hint","flex relative pointer-events-none",e>=0||a>=0?"bg-base-200/50":"bg-accent",{"game-grid-hint-t-strong":e%5==0||-1===e,"game-grid-hint-l-strong":a%5==0||-1===a,"game-grid-hint-b-strong":e>=o-1||-1===e,"game-grid-hint-r-strong":a>=l-1||-1===a}]),children:[e>=0||a>=0?t.jsxs(t.Fragment,{children:[a<0&&n.rows[e]?t.jsx(Pt,{type:"row",hints:n.rows[e],isLineDone:i.rows[e]}):null,e<0&&n.cols[a]?t.jsx(Pt,{type:"col",hints:n.cols[a],isLineDone:i.cols[a]}):null]}):t.jsx(Ot,{}),!c||r||u!==a&&d!==e?null:t.jsx(Ct,{})]})},Tt=e.memo(()=>{const{isInteracting:a}=Be(),{isCompleted:n}=He(),{showEffects:r,isRefreshing:i,isGlobalError:o,rows:l,cols:c,difficulty:u,seed:d}=Ae(),{play:m}=tt(),[g,p]=e.useState(""),f={5:"grid-cols-[min-content_repeat(5,1fr)]",6:"grid-cols-[min-content_repeat(6,1fr)]",7:"grid-cols-[min-content_repeat(7,1fr)]",8:"grid-cols-[min-content_repeat(8,1fr)]",9:"grid-cols-[min-content_repeat(9,1fr)]",10:"grid-cols-[min-content_repeat(10,1fr)]",11:"grid-cols-[min-content_repeat(11,1fr)]",12:"grid-cols-[min-content_repeat(12,1fr)]",13:"grid-cols-[min-content_repeat(13,1fr)]",14:"grid-cols-[min-content_repeat(14,1fr)]",15:"grid-cols-[min-content_repeat(15,1fr)]",16:"grid-cols-[min-content_repeat(16,1fr)]",17:"grid-cols-[min-content_repeat(17,1fr)]",18:"grid-cols-[min-content_repeat(18,1fr)]",19:"grid-cols-[min-content_repeat(19,1fr)]",20:"grid-cols-[min-content_repeat(20,1fr)]"},h={5:"grid-rows-[min-content_repeat(5,1fr)]",6:"grid-rows-[min-content_repeat(6,1fr)]",7:"grid-rows-[min-content_repeat(7,1fr)]",8:"grid-rows-[min-content_repeat(8,1fr)]",9:"grid-rows-[min-content_repeat(9,1fr)]",10:"grid-rows-[min-content_repeat(10,1fr)]",11:"grid-rows-[min-content_repeat(11,1fr)]",12:"grid-rows-[min-content_repeat(12,1fr)]",13:"grid-rows-[min-content_repeat(13,1fr)]",14:"grid-rows-[min-content_repeat(14,1fr)]",15:"grid-rows-[min-content_repeat(15,1fr)]",16:"grid-rows-[min-content_repeat(16,1fr)]",17:"grid-rows-[min-content_repeat(17,1fr)]",18:"grid-rows-[min-content_repeat(18,1fr)]",19:"grid-rows-[min-content_repeat(19,1fr)]",20:"grid-rows-[min-content_repeat(20,1fr)]"};return e.useEffect(()=>{i&&m("grid-refresh")},[i,m]),t.jsx(jt,{mountIf:!n&&!i,timeout:{start:100,entering:300,exiting:n?1700:300},onMounted:()=>p(`${d}.${l}x${c}.${u}`),children:({isEntering:u})=>t.jsx("div",{className:s(["game-grid",{"game-grid-error":o,"game-grid-right":!o&&"right"===a},"flex flex-col grow justify-center items-center my-auto relative"]),style:{"--block-color":`${Et(Ce("--color-white"))}`},children:t.jsx("div",{className:s(["game-grid-wrapper grid",f[c],h[l],"p-0.5 min-w-fit min-h-fit h-full max-w-full max-h-full","border-5 rounded-lg",o?"border-error":"left"===a?"border-accent":"border-primary",u?"opacity-100 scale-100":n?"scale-50 opacity-0":"scale-90 opacity-0",r?"transition-[opacity,filter,scale,border-color,box-shadow]":"transition-[opacity,scale,border-color]",n?"duration-1200 ease-in delay-500":"duration-300 ease-out",{"blur-md":r&&n,"blur-xs":r&&!n&&i}]),children:Array.from({length:l+1}).map((a,s)=>Array.from({length:c+1}).map((a,n)=>t.jsx(e.Fragment,{children:0===s||0===n?t.jsx(At,{row:s-1,col:n-1}):t.jsx(Dt,{row:s-1,col:n-1})},`${s}.${n}`)))})},g)})}),qt=t=>{const{firestore:a,isAuthenticated:s}=ke(),[n,r]=e.useState([]),[i,o]=e.useState(!0),[l,c]=e.useState(null),u=e.useMemo(()=>a?{firestore:a,collectionName:t}:null,[a,t]),d=e.useCallback(async(e=[])=>{if(s&&u){o(!0),c(null);try{const{collection:t,getDocs:a,query:s}=await pe(async()=>{const{collection:e,getDocs:t,query:a}=await import("./firestore-B5l3haMQ.js");return{collection:e,getDocs:t,query:a}},__vite__mapDeps([3,0,1,2])),n=s(t(u.firestore,u.collectionName),...e),i=await a(n);r(i.docs.map(e=>({id:e.id,...e.data()})))}catch(t){c(t instanceof Error?t.message:String(t))}finally{o(!1)}}},[s,u]),m=e.useCallback(async e=>{if(s&&u){o(!0),c(null);try{const{collection:t,addDoc:a}=await pe(async()=>{const{collection:e,addDoc:t}=await import("./firestore-B5l3haMQ.js");return{collection:e,addDoc:t}},__vite__mapDeps([3,0,1,2])),s=t(u.firestore,u.collectionName);await a(s,e),await d()}catch(t){c(t instanceof Error?t.message:String(t))}finally{o(!1)}}},[s,u,d]);return{docs:n,isLoading:i,error:l,getDocuments:d,addDocument:m}},Ft=()=>{const{i18n:a}=l(),{timeUnits:s}=Ke(),n=e.useRef(s);return t.jsxs("div",{className:"badge badge-lg badge-light rounded-sm",children:[t.jsx(B,{className:"text-svg-inline"}),a.t("score.time"),":",t.jsx(mt,{timeUnits:n.current,units:"abbr",separator:!1,className:"flex gap-1 font-black text-secondary"})]})},Ut=()=>{const{i18n:a}=l(),{score:s}=He(),{number:n}=at(),r=e.useRef(s);return t.jsxs("div",{className:"badge badge-lg badge-light rounded-sm",children:[t.jsx(V,{className:"text-svg-inline"}),a.t("score.points"),":",t.jsx("span",{className:"font-black text-secondary",children:n(r.current)})]})},Bt=({className:e=""})=>new Array(3).fill(0).map((a,n)=>t.jsx(G,{className:s(["text-svg-inline",e])},n)),Vt=({rating:a,hasTransition:n=!0,stroke:r="stroke-primary",fill:i="fill-primary",className:o=""})=>{const[l,c]=e.useState(0),[u,d]=e.useState(0),m=e.useRef(a),g=e.useRef(null),p=()=>{null!==g.current&&(clearTimeout(g.current),g.current=null)};return e.useEffect(()=>(p(),n?(d(100*a/70),g.current=setTimeout(()=>c(Math.round(100*m.current)),1e3)):c(Math.round(100*m.current)),()=>p()),[a,n]),t.jsxs("div",{className:s(["relative",o]),children:[t.jsx("div",{className:"flex flex-nowrap gap-0.2",children:t.jsx(Bt,{className:s([r])})}),t.jsx("div",{className:s(["flex flex-nowrap gap-0.2","absolute top-0 left-0 overflow-hidden",{"transition-[width] ease-out":n}]),style:{width:`${l}%`,transitionDuration:`${u}s`},children:t.jsx(Bt,{className:s(["flex-shrink-0",r,i])})})]})},Gt=()=>{const{rating:a,hasWin:n}=He(),{percentage:r}=at(),i=e.useRef(a);return t.jsxs("div",{className:"indicator indicator-bottom indicator-center relative",children:[t.jsx("div",{className:s({"animate-bounce":n}),style:{filter:`drop-shadow(0 0 1.5rem rgba(${Et(Ce("--color-white"))}, 0.8)`},children:t.jsx(Vt,{rating:a,stroke:"stroke-1 stroke-secondary",fill:"fill-secondary",className:"text-6xl"})}),t.jsxs("div",{className:"indicator-item badge badge-xl bg-white text-secondary border-none rounded-full shadow",children:[t.jsx(K,{className:"text-svg-inline"}),t.jsx("span",{className:"font-black",children:r(i.current,1)})]})]})};var Kt="leaderboard";const Xt=()=>{const{i18n:a}=l(),{logEvent:n}=ke(),{addDocument:r}=qt(Kt),{isReady:i,isCompleted:o,score:c,rating:u,hasWin:d}=He(),{setSeed:m,user:g,country:p,seed:f,cols:h,rows:b,difficulty:x,showEffects:k,isLeaderboardOn:y}=Ae(),{ms:j}=Ke(),{play:v}=tt(),[w,N]=e.useState(""),[E,S]=e.useState(""),z=e.useCallback(e=>{const t=a.t(e,{returnObjects:!0});return t.length>0?t[Math.floor(Math.random()*t.length)]:""},[a]),C=e.useCallback(()=>{N(z("score.titles")),S(z("score.next")),v(d?"ending-victory":"ending-loss"),y&&d&&r({date:le(),name:g??"",country:p,score:c,rating:u,cols:h,rows:b,difficulty:x,seed:f,time:j,prod:!0}),n("level_complete",{user:g,score:c,rating:u,cols:h,rows:b,difficulty:x,seed:f,time:j,prod:!0,has_win:d})},[n,z,v,y,r,d,g,p,c,u,h,b,x,f,j]);return t.jsx(jt,{mountIf:i&&o,timeout:k?{delay:1e3,entering:400,exiting:400}:0,onMounted:C,children:({isEntering:e,isMounting:a,status:n})=>t.jsx("div",{className:s(["overlay overflow-hidden","fixed top-0 bottom-0 left-0 right-0 z-10","flex justify-center items-center",e?"opacity-100":"opacity-0",{"transition-opacity duration-400":k,"pointer-events-none":"done"!==n}]),children:t.jsxs("div",{className:"flex flex-col gap-10 text-white text-center",children:[t.jsx("div",{className:s(["text-[12vw] tracking-tight leading-[0.8em] font-black","done"!==n?a?"-translate-x-full opacity-0":"translate-x-full opacity-0":"translate-x-0 opacity-100",{"transition-[translate,opacity] duration-1000 drop-shadow-xl":k}]),children:w}),t.jsx("div",{className:"flex justify-center my-5",children:t.jsx(Gt,{})}),t.jsxs("div",{className:"flex flex-col items-center gap-0.5",children:[t.jsx(Ft,{}),t.jsx(Ut,{})]}),t.jsx("div",{children:t.jsxs("button",{type:"button",className:"btn btn-xl btn-secondary rounded-full px-15",disabled:!o,onClick:()=>m(),children:[t.jsx(X,{className:"text-svg-inline"})," ",E]})})]})})})},Ht=()=>t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"flex absolute top-0 bottom-0 left-0 right-0 scrollbar overflow-auto",children:t.jsx(Tt,{})}),t.jsx(Xt,{})]}),Yt=()=>{const{i18n:e}=l();return t.jsx(ne,{children:t.jsxs(re,{element:t.jsx(wt,{}),children:[t.jsx(re,{path:"/:language/game/:cols/:rows/:difficulty/:seed",index:!0,element:t.jsx(Ht,{})}),t.jsx(re,{path:"*",element:t.jsx(ie,{to:`/${e.language}/${je.pages.default}`,replace:!0})})]})})},Wt=({show:e,label:a,children:n})=>{const{showEffects:r}=Ae();return t.jsxs("div",{className:s(["relative text-primary bg-white p-5 md:p-10 inline-block","rounded-lg shadow-lg shadow-primary/20",{"transition-[margin-right] duration-300":r,"-me-10 md:-me-25":e}]),children:[n,a?t.jsx("div",{className:"absolute left-5 md:left-10 top-0 -translate-y-1/2 badge badge-secondary",children:a}):null]})},Zt=({country:a,className:n})=>{const{isoToCountry:r}=(()=>{const{i18n:t}=l(),a=e.useCallback(e=>{try{return new Intl.DisplayNames(t.language,{type:e})}catch(a){}return new Intl.DisplayNames(je.locale.allowed.default,{type:e})},[t.language]),s=e.useCallback((e,t)=>{try{return(e&&a(t).of(e))??null}catch(s){}return null},[a]);return{isoToCountry:e.useCallback(e=>s(e,"region"),[s]),isoToLanguage:e.useCallback(e=>s(e,"language"),[s])}})(),[i,o]=e.useState(null);return e.useEffect(()=>{a&&o(r(a))},[r,a]),i?t.jsx("span",{className:s(n),children:i}):null},Jt=()=>{const{i18n:e}=l(),{user:a,country:s,setUser:n}=Ae(),{play:r}=tt();return t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(pt,{name:a,country:s,className:"max-w-[4rem]"}),t.jsxs("label",{className:"input input-primary w-full",children:[t.jsx("strong",{className:"text-accent",children:e.t("user")}),t.jsx("input",{type:"text",value:a||"",onChange:e=>{r("grid-block-over"),n(e.target.value.trim().length>0?e.target.value:"")},onBlur:e=>{return n(e.target.value.trim().length>0&&(t=e.target.value.trim(),!/^[*]+$/.test(t))?e.target.value.trim():null);var t}}),t.jsx(Zt,{country:s,className:"badge badge-xs badge-primary"})]})]})},Qt=({rank:e})=>t.jsxs("div",{className:"text-xs font-mono justify-self-end",children:[("0"+(e+1)).slice(-2),"."]}),ea=({rank:e,name:a,country:n=null})=>t.jsxs("div",{className:s(["truncate text-primary",{"text-sm sm:text-base font-bold":0===e,"text-xs sm:text-sm":e<10,"text-xs":e>=10}]),children:[t.jsx(Zt,{country:n,className:"badge badge-xs badge-primary align-text-top hidden sm:inline-block me-1 sm:me-2"}),a]}),ta=({rank:e,cols:a,rows:n,difficulty:r,seed:i})=>{const{i18n:o}=l(),{setSeed:c,setCols:u,setRows:d,setDifficulty:m,setIsDrawerShown:g}=Ae();return t.jsx(t.Fragment,{children:t.jsx("button",{type:"button",className:s(["btn btn-xs btn-link","!block text-base-300 max-w-full no-underline truncate","hover:!no-underline hover:text-accent",e<10?"text-xs":"text-xxs"]),title:`${o.t("grid")}: ${a}×${n} - ${o.t("difficulty")}: ${o.t(`difficulties.${r}`)} - ${o.t("seed")}: ${i}`,onClick:()=>{c(i),u(a),d(n),m(r),g(!1)},children:t.jsxs("span",{children:[t.jsx(F,{className:"text-svg-inline me-0.5"}),i]})})})},aa=({score:e})=>{const{number:a}=at();return t.jsx("div",{className:"font-mono text-nowrap text-xs text-secondary",children:a(e)})},sa=({time:e})=>t.jsx(mt,{timeUnits:Ze(e),units:"abbr",separator:!1,className:"flex flex-nowrap gap-1 justify-self-end font-mono text-xs text-secondary"}),na=({date:a})=>{const{date:s}=(()=>{const{i18n:t}=l(),a=e=>e?new Date(e):new Date,s=e.useCallback((e,s)=>{try{return a(e).toLocaleDateString(t.language,s)}catch(n){return a(e).toLocaleDateString(je.locale.allowed.default,s)}},[t.language]);return{format:s,date:e=>s(e,{year:"numeric",month:"2-digit",day:"2-digit"}),textDate:e=>s(e,{year:"numeric",month:"long",day:"numeric"}),textDateShort:e=>s(e,{year:"numeric",month:"short",day:"numeric"}),datetime:e=>s(e,{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).replace(", "," "),textDatetime:e=>s(e,{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}).replace(", "," "),textDatetimeShort:e=>s(e,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}).replace(", "," ")}})();return a?t.jsx("div",{className:"text-xxs leading-none font-mono justify-self-end",children:s(a.toString())}):null},ra=({rank:e,date:a,name:n,country:r=null,score:i,rating:o,cols:l,rows:c,difficulty:u,seed:d,time:m})=>t.jsxs(t.Fragment,{children:[e>0?t.jsx("div",{className:"col-span-5 border-t border-dashed border-base-300"}):null,t.jsx(Qt,{rank:e}),e<10?t.jsx(pt,{name:n,country:r,className:s(["justify-self-center",0===e?"w-[2.8rem] md:w-[3.5rem]":"w-[2.1rem] md:w-[2.8rem]"])}):null,t.jsxs("div",{className:s({"col-span-2 ps-2 md:ps-3":e>=10}),children:[t.jsx(ea,{rank:e,name:n,country:r}),t.jsx(ta,{rank:e,cols:l,rows:c,difficulty:u,seed:d})]}),t.jsxs("div",{className:"flex flex-col items-end",children:[t.jsx(sa,{time:m}),t.jsx(na,{date:a instanceof ce?a.toDate().toString():void 0})]}),t.jsxs("div",{className:"flex flex-col items-center",children:[t.jsx(aa,{score:i}),t.jsx(Vt,{rating:o,hasTransition:!1,stroke:"stroke-2 stroke-secondary",fill:"fill-secondary",className:"text-xxs"})]})]}),ia=()=>{const{i18n:e}=l(),{difficulty:a,cols:s,rows:n}=Ae();return t.jsxs("div",{className:"flex gap-0.5 mb-5",children:[t.jsxs("span",{className:"badge badge-sm badge-outline badge-primary rounded-sm gap-1 font-bold",children:[t.jsx(v,{className:"text-svg-inline"}),`${s}×${n}`]}),t.jsxs("span",{className:"badge badge-sm badge-outline badge-primary rounded-sm gap-1 font-bold",children:[t.jsx(ut,{difficulty:a}),e.t(`difficulties.${a}`)]})]})};var oa="leaderboard";const la=({show:a})=>{const{getDocuments:s,docs:n,isLoading:r,error:i}=qt(oa),{difficulty:o,cols:l,rows:c}=Ae();return e.useEffect(()=>{a&&s([ue("prod","==",!0),ue("name",">=",""),ue("name","<=",""),ue("difficulty","==",o),ue("cols","==",l),ue("rows","==",c),ue("time",">",0),ue("score",">",0),ue("rating",">",0),de("score","desc"),de("time","asc"),de("name","asc"),me(10)])},[s,a,o,l,c]),t.jsxs(t.Fragment,{children:[t.jsx(ia,{}),r?t.jsx("div",{className:"loading loading-infinity loading-xl"}):i?t.jsxs("div",{className:"text-error",children:[t.jsx(q,{className:"text-svg-inline text-3xl mb-1"}),t.jsx("div",{className:"text-xs font-bold text-wrap break-words",children:i})]}):n.length>0?t.jsx("div",{className:"grid grid-cols-[min-content_min-content_minmax(100px,1fr)_min-content_min-content] gap-x-2 sm:gap-x-5 gap-y-1 md:gap-y-2 justify-items-stretch items-center",children:n.map((e,a)=>e?t.jsx(ra,{rank:a,...e},a):null)}):t.jsx(H,{className:"text-svg-inline text-3xl text-secondary"})]})},ca=()=>{const a=e.useRef(null),{i18n:n}=l(),{seed:r,setSeed:i,isRefreshing:o,showEffects:c}=Ae(),{play:u}=tt(),[d,m]=e.useState(""),[g,p]=e.useState(!1),f=e.useCallback(e=>{i(d),e.preventDefault(),a.current?.blur()},[d,i]);return e.useEffect(()=>m(r),[r]),t.jsxs("form",{className:"flex flex-col sm:flex-row gap-1",onSubmit:f,children:[t.jsxs("label",{className:s(["input input-primary w-full",{"!border-primary/50":o||g}]),children:[t.jsx("strong",{className:"text-accent",children:n.t("seed")}),t.jsx("input",{ref:a,type:"text",value:d,disabled:o||g,onChange:e=>{u("grid-block-over"),m(Se(e.target.value))},onFocus:()=>m(""),onBlur:e=>{0===e.target.value.trim().length&&m(r)}}),t.jsx("button",{type:"button",className:s(["cursor-pointer",g?"text-secondary":"text-accent hover:text-accent/50",{"transition-[color] duration-400":c}]),onPointerEnter:()=>u("grid-block-over"),onClick:()=>{o||g||(i(),p(!0))},disabled:g,children:t.jsx(C,{className:s(["w-full pointer-events-none",{"duration-500":c,"transition-[rotate] -rotate-360":c&&(o||g),"transition-none rotate-0":!o&&!g}]),onTransitionEnd:()=>p(!1)})})]}),t.jsx("button",{type:"submit",className:"btn btn-primary",disabled:0===d.length||d===r,onPointerEnter:()=>u("grid-block-over"),children:t.jsx(Y,{className:"w-full"})})]})},ua=()=>{const{i18n:a}=l(),{setDifficulty:s,difficulty:n}=Ae(),{play:r}=tt(),i=e.useRef(["easy","medium","hard"]);return t.jsx("div",{className:"flex flex-wrap gap-0.5 justify-stretch",children:i.current.map(e=>t.jsxs("button",{className:"flex-1 btn btn-sm btn-outline btn-primary disabled:!bg-accent disabled:!text-white",type:"button",disabled:e===n,onPointerEnter:()=>r("grid-block-over"),onClick:()=>{r("grid-block-correct"),s(e)},children:[t.jsx(ut,{difficulty:e,className:"text-xl hidden md:block"}),a.t(`difficulties.${e}`)]},e))})},da=({label:a,value:n,showValue:r,min:i,max:o,step:l=1,help:c,onChange:u})=>{const{showEffects:d}=Ae(),{play:m}=tt(),[g,p]=e.useState(!1),[f,h]=e.useState(!1),b=e.useRef(null),x=()=>{null!==b.current&&(clearTimeout(b.current),b.current=null)};return e.useEffect(()=>(x(),h(!0),b.current=setTimeout(()=>h(!1),700),()=>x()),[n]),t.jsxs("div",{children:[t.jsxs("div",{className:"indicator indicator-middle flex w-full",children:[t.jsxs("span",{className:s(["indicator-item gap-1 left-0 translate-x-1 -translate-y-1/2","badge badge-xs badge-accent pointer-events-none",{"transition-[background-color,opacity,border-color,color] duration-300 backdrop-blur-xs":d,"opacity-50":g,"bg-accent/0 border-base-content text-base-content opacity-100":g&&f}]),children:[a,": ",t.jsx("strong",{children:r??n})]}),t.jsx("input",{type:"range",className:s(["range w-full",g&&f?"range-accent":"range-primary"]),min:i,max:o,step:l,value:n,onPointerEnter:()=>{m("grid-block-over"),p(!0)},onPointerLeave:()=>p(!1),onPointerUp:()=>m("grid-block-correct"),onChange:e=>u(Number(e.target.value))})]}),c?t.jsxs("span",{className:"text-xs hidden md:block text-primary mt-1",children:[t.jsx(W,{className:"text-svg-inline"})," ",c]}):null]})},ma=({label:a,icon:n,iconOff:r,checked:i,disabled:o=!1,onChange:l})=>{const{play:c}=tt(),u={className:"text-svg-inline text-lg"};return e.useEffect(()=>{o&&l(!1)},[o,l]),t.jsxs("label",{className:s(["flex gap-2 items-center max-w-fit","text-xs font-bold",o?"cursor-not-allowed":"cursor-pointer",i?"text-secondary":"text-base-content/50",o?"opacity-50":"hover:opacity-80"]),onPointerEnter:()=>o?null:c("grid-block-over"),children:[t.jsx("input",{type:"checkbox",className:"toggle toggle-sm toggle-secondary disabled:opacity-100",checked:i,disabled:o,onChange:e=>{o||(c("grid-block-correct"),l(e.target.checked))}}),n?t.jsxs(t.Fragment,{children:[n&&r?i?e.cloneElement(n,u):e.cloneElement(r,u):e.cloneElement(n,u)," "]}):null,t.jsx("span",{children:a})]})},ga=()=>{const{i18n:a}=l(),{setSeed:n,setRows:r,setCols:i,setDifficulty:o,showEffects:c}=Ae(),{play:u}=tt(),[d,m]=e.useState(!1),g=e.useRef(["easy","medium","hard"]),p=e.useRef(null),f=()=>Math.floor(Math.random()*(je.game.grid.max-je.game.grid.min+1)+je.game.grid.min),h=()=>{null!==p.current&&(clearTimeout(p.current),p.current=null)},b=e.useCallback(()=>{if(!d)return h(),u("grid-block-correct"),m(!0),n(),r(f()),i(f()),o(g.current[Math.floor(Math.random()*g.current.length)]),p.current=setTimeout(()=>m(!1),500),()=>h()},[d,n,r,i,o,u]);return t.jsxs("button",{className:"flex-1 btn btn-outline btn-primary disabled:!bg-secondary disabled:text-white",type:"button",onPointerEnter:()=>u("grid-block-over"),onClick:b,disabled:d,children:[t.jsx(Z,{className:s(["text-svg-inline",{"duration-500":c,"transition-[rotate] rotate-360":c&&d,"transition-none rotate-0":!d}])}),a.t("randomize")]})},pa=()=>{const{i18n:a}=l(),{copied:n,copyToClipboard:r}=(()=>{const[t,a]=e.useState(!1);return{copyToClipboard:async e=>{try{await navigator.clipboard.writeText(e),a(!0),setTimeout(()=>a(!1),2e3)}catch(t){a(!1)}},copied:t}})(),{play:i}=tt();return t.jsxs("button",{type:"button",className:s(["btn flex-1",n?"btn-accent":"btn-outline btn-primary"]),onPointerEnter:()=>i("grid-block-over"),onClick:()=>{i("grid-block-correct"),r(window.location.href)},children:[n?t.jsx(Y,{className:"text-svg-inline"}):t.jsx(J,{className:"text-svg-inline"})," ",a.t(n?"clipboard.copied":"clipboard.copyUrl")]})},fa=()=>{const{i18n:e}=l(),{rows:a,cols:s,isAuto:n,showIntersections:r,showEffects:i,isLeaderboardOn:o,isMusicOn:c,setRows:u,setCols:d,setIsAuto:m,setShowIntersections:g,setShowEffects:p,setIsLeaderboardOn:f,setIsMusicOn:h}=Ae(),{scale:b,setScale:x}=Fe(),{percentage:k}=at(),{currentBreakpoint:y}=Re();return t.jsxs(t.Fragment,{children:[t.jsx(ca,{}),t.jsxs("div",{className:"flex flex-col gap-1",children:[t.jsx(da,{label:e.t("size.width"),value:s,min:je.game.grid.min,max:je.game.grid.max,onChange:d}),t.jsx(da,{label:e.t("size.height"),value:a,min:je.game.grid.min,max:je.game.grid.max,onChange:u})]}),t.jsx(ua,{}),t.jsx(da,{label:e.t("scale"),value:b,showValue:k(b),min:je.game.scale.min,max:je.game.scale.max,step:je.game.scale.step,help:t.jsxs(t.Fragment,{children:[t.jsxs("kbd",{className:"kbd kbd-xs",children:[t.jsx(Q,{className:"text-svg-inline me-1"})," ","shift"]})," ","+ ",e.t("scrollwheel")]}),onChange:x}),t.jsxs("div",{className:"flex flex-wrap gap-0.5",children:[t.jsx(ga,{}),t.jsx(pa,{})]}),t.jsxs("div",{className:"flex flex-col flex-wrap gap-2",children:[t.jsx(ma,{label:e.t("music"),icon:t.jsx(L,{}),iconOff:t.jsx($,{}),checked:c,onChange:h}),t.jsx(ma,{label:e.t("effects"),icon:t.jsx(D,{}),iconOff:t.jsx(R,{}),checked:i,onChange:p}),t.jsx(ma,{label:e.t("auto"),icon:t.jsx(_,{}),iconOff:t.jsx(P,{}),checked:n,disabled:["xs","sm"].includes(y),onChange:m}),t.jsx(ma,{label:e.t("intersections"),icon:t.jsx(O,{}),iconOff:t.jsx(A,{}),checked:r,disabled:["xs","sm"].includes(y),onChange:g}),t.jsx(ma,{label:e.t("saveLeaderboard"),icon:t.jsx(T,{}),iconOff:t.jsx(q,{}),checked:o,onChange:f})]})]})},ha=()=>{const{i18n:e}=l();return t.jsx("div",{className:"text-xs text-primary",children:t.jsx(c,{i18nKey:"footer.copyright",values:{year:(new Date).getFullYear(),author:e.t("footer.author")},components:{buttonAuthor:t.jsx("button",{type:"button",className:"link hover:text-accent font-bold",onClick:()=>_e(e.t("footer.website"))}),buttonGitHub:t.jsx("button",{type:"button",className:"link hover:text-accent font-bold",onClick:()=>_e(e.t("footer.github"))}),buttonRepo:t.jsx("button",{type:"button",className:"link hover:text-accent font-bold",onClick:()=>_e(e.t("footer.repository"))})}})})},ba=()=>{const{i18n:e}=l(),{isDrawerShown:a,setIsDrawerShown:n,showEffects:r,isLeaderboardOn:i}=Ae();return t.jsx(jt,{mountIf:a,timeout:r?500:0,children:({isEntering:a,status:o})=>t.jsxs("div",{className:"drawer fixed top-0 bottom-0 left-0 right-0 z-10",children:[t.jsx("button",{type:"button",className:s(["drawer-overlay overlay","fixed top-0 bottom-0 left-0 right-0 cursor-se-resize",a?"opacity-100":"opacity-0",{"transition-opacity duration-250":r,"pointer-events-none":!["entering","done"].includes(o)}]),onClick:()=>n(!1)}),t.jsx("div",{className:"absolute top-0 bottom-0 left-0 right-0 overflow-y-auto pointer-events-none",children:t.jsx("div",{className:s(["drawer-side will-change-transform","absolute top-0 left-0","bg-base-200 text-base-content","w-[85vw] md:w-[65vw] lg:w-[50vw] xl:w-[45vw]","min-w-xs max-w-[900px] min-h-full","p-5 md:p-10 pointer-events-auto",a?"translate-x-0":"-translate-x-full",{"transition-transform duration-500":r}]),children:t.jsxs("div",{className:"flex flex-col gap-7 md:gap-10",children:[t.jsx(ot,{size:"lg"}),t.jsx(Wt,{show:a,children:t.jsx(Jt,{})}),t.jsx(fa,{}),i?t.jsx(Wt,{show:a,label:e.t("leaderboard.title"),children:t.jsx(la,{show:"done"===o})}):null,t.jsx(ha,{})]})})})]})})},xa=()=>{const{add:a}=tt();return e.useEffect(()=>{a("grid-refresh","./sounds/grid-refresh.mp3",.3),a("grid-block-over","./sounds/grid-block-over.mp3",.05),a("grid-block-correct","./sounds/grid-block-correct.mp3",.3),a("grid-block-wrong","./sounds/grid-block-wrong.mp3",.5),a("ending-loss","./sounds/ending-loss.mp3"),a("ending-victory","./sounds/ending-victory.mp3")},[a]),t.jsxs(t.Fragment,{children:[t.jsx(rt,{}),t.jsxs("div",{className:"app flex flex-col min-w-xs select-none text-base-content",children:[t.jsx(st,{}),t.jsx(Yt,{})]}),t.jsx(ba,{})]})},ka=async({iso:e,ns:t})=>{let a={};try{a=await((e,t,a)=>{const s=e[t];return s?"function"==typeof s?s():Promise.resolve(s):new Promise((e,s)=>{("function"==typeof queueMicrotask?queueMicrotask:setTimeout)(s.bind(null,new Error("Unknown variable dynamic import: "+t+(t.split("/").length!==a?". Note that variables only represent file names one level deep.":""))))})})(Object.assign({"./en-GB/default.json":()=>pe(()=>import("./default-CFdxHSio.js"),[])}),`./${e}/${t}.json`,3)}catch(s){}return a};u.use(d).use(m).init({ns:je.locale.groups.list,defaultNS:je.locale.groups.default,resources:await(async()=>{const e={},t=je.locale.allowed.list.map(async t=>{e[t]={},await Promise.all(je.locale.groups.list.map(async a=>{e[t][a]=await ka({iso:t,ns:a})}))});return await Promise.all(t),e})(),fallbackLng:je.locale.allowed.default,supportedLngs:je.locale.allowed.list,returnEmptyString:!0,debug:!1,interpolation:{escapeValue:!1},parseMissingKeyHandler:()=>""}),r.createRoot(document.getElementById("root")).render(t.jsx(e.StrictMode,{children:t.jsx(Le,{children:t.jsx(Pe,{children:t.jsx(xe,{children:t.jsx(oe,{children:t.jsx(qe,{children:t.jsx(et,{children:t.jsx(Je,{children:t.jsx(Ue,{children:t.jsx(Xe,{children:t.jsx(xa,{})})})})})})})})})})}));
